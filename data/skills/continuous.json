{
  "id": "a613417ef2a81129",
  "slug": "continuous",
  "name": "Continuous",
  "description": "Toolkit for Claude Code that preserves session state across context clears using hooks and file-based handoffs. Includes MCP code execution runtime for reduced token usage.",
  "author": "parcadei",
  "authorAvatar": "https://avatars.githubusercontent.com/u/227596144?v=4",
  "repoUrl": "https://github.com/parcadei/Continuous-Claude",
  "repoFullName": "parcadei/Continuous-Claude",
  "stars": 5,
  "forks": 0,
  "category": "coding",
  "categories": [
    "coding"
  ],
  "tags": [
    "agents",
    "claude-code",
    "claude-code-cli",
    "claude-code-hooks",
    "claude-code-mcp",
    "claude-code-skills",
    "claude-code-subagents",
    "claude-skills",
    "mcp"
  ],
  "tier": 3,
  "status": "active",
  "createdAt": "2025-12-23T00:12:49Z",
  "updatedAt": "2025-12-23T23:47:40Z",
  "lastCommitAt": "2025-12-23T23:47:37Z",
  "source": "github-topic",
  "collectedAt": "2025-12-24T03:38:30.104Z",
  "authorUrl": "https://github.com/parcadei",
  "license": "NOASSERTION",
  "readme": "# Continuous Claude\n\nSession continuity, token-efficient MCP execution, and agentic workflows for Claude Code.\n\n---\n\n## Table of Contents\n\n- [The Problem](#the-problem) / [The Solution](#the-solution)\n- [Quick Start](#quick-start)\n- [How to Talk to Claude](#how-to-talk-to-claude)\n- [Skills vs Agents](#skills-vs-agents)\n- [MCP Code Execution](#mcp-code-execution)\n- [Continuity System](#continuity-system)\n- [Hooks System](#hooks-system)\n- [Reasoning History](#reasoning-history)\n- [TDD Workflow](#tdd-workflow)\n- [Code Quality (qlty)](#code-quality-qlty)\n- [Directory Structure](#directory-structure)\n- [Environment Variables](#environment-variables)\n- [Troubleshooting](#troubleshooting)\n- [Acknowledgments](#acknowledgments)\n\n---\n\n## The Problem\n\nWhen Claude Code runs low on context, it compacts (summarizes) the conversation. Each compaction is lossy. After several, you're working with a summary of a summary of a summary. Signal degrades into noise.\n\n```\nSession Start: Full context, high signal\n    â†“ work, work, work\nCompaction 1: Some detail lost\n    â†“ work, work, work\nCompaction 2: Context getting murky\n    â†“ work, work, work\nCompaction 3: Now working with compressed noise\n    â†“ Claude starts hallucinating context\n```\n\n## The Solution\n\n**Clear, don't compact.** Save state to a ledger, wipe context, resume fresh.\n\n```\nSession Start: Fresh context + ledger loaded\n    â†“ focused work\nComplete task, save to ledger\n    â†“ /clear\nFresh context + ledger loaded\n    â†“ continue with full signal\n```\n\n**Why this works:**\n- Ledgers are lossless - you control what's saved\n- Fresh context = full signal\n- Agents spawn with clean context, not degraded summaries\n\n---\n\n## Quick Start\n\n```bash\n# Clone\ngit clone https://github.com/parcadei/claude-continuity-kit.git\ncd claude-continuity-kit\n\n# Install Python deps\nuv sync\n\n# Configure (add your API keys)\ncp .env.example .env\n\n# Generate MCP wrappers\nuv run mcp-generate\n\n# Start\nclaude\n```\n\n**Zero-dep hooks** - hooks are pre-bundled, no `npm install` needed.\n\nThe continuity system loads automatically via hooks.\n\n---\n\n## How to Talk to Claude\n\nThis kit responds to natural language triggers. Say certain phrases and Claude activates the right skill or spawns an agent.\n\n### Session Management\n\n| Say This | What Happens |\n|----------|--------------|\n| \"save state\", \"update ledger\", \"before clear\" | Updates continuity ledger, preserves state for `/clear` |\n| \"done for today\", \"wrap up\", \"create handoff\" | Creates detailed handoff doc for next session |\n| \"resume work\", \"continue from handoff\", \"pick up where\" | Loads handoff, analyzes context, continues |\n\n### Planning & Implementation\n\n| Say This | What Happens |\n|----------|--------------|\n| \"create plan\", \"design\", \"architect\", \"greenfield\" | Spawns **plan-agent** to create implementation plan |\n| \"validate plan\", \"before implementing\", \"ready to implement\" | Spawns **validate-agent** to check tech choices |\n| \"implement plan\", \"execute plan\", \"run the plan\" | Spawns **implement_plan** with agent orchestration |\n| \"verify implementation\", \"did it work\", \"check code\" | Runs **validate_plan** to verify against plan |\n\n**The 3-step flow:**\n```\n1. plan-agent     â†’ Creates plan in thoughts/shared/plans/\n2. validate-agent â†’ Checks tech choices against best practices\n3. implement_plan â†’ Executes with task agents, creates handoffs\n```\n\n### Code Quality\n\n| Say This | What Happens |\n|----------|--------------|\n| \"implement\", \"add feature\", \"fix bug\", \"refactor\" | **TDD workflow** activates - write failing test first |\n| \"lint\", \"code quality\", \"auto-fix\", \"check code\" | Runs **qlty-check** (70+ linters, auto-fix) |\n| \"commit\", \"push\", \"save changes\" | Runs **commit** skill (removes Claude attribution) |\n| \"describe pr\", \"create pr\" | Generates PR description from changes |\n\n### Codebase Exploration\n\n| Say This | What Happens |\n|----------|--------------|\n| \"brownfield\", \"existing codebase\", \"repoprompt\" | Spawns **rp-explorer** - uses RepoPrompt for token-efficient exploration |\n| \"how does X work\", \"trace\", \"data flow\", \"deep dive\" | Spawns **codebase-analyzer** for detailed analysis |\n| \"find files\", \"where are\", \"which files handle\" | Spawns **codebase-locator** (super grep/glob) |\n| \"find examples\", \"similar pattern\", \"how do we do X\" | Spawns **codebase-pattern-finder** |\n| \"explore\", \"get familiar\", \"overview\" | Spawns **explore** agent with configurable depth |\n\n**rp-explorer uses RepoPrompt tools:**\n- **Context Builder** - Deep AI-powered exploration (async, 30s-5min)\n- **Codemaps** - Function/class signatures without full file content (10x fewer tokens)\n- **Slices** - Read specific line ranges, not whole files\n- **Search** - Pattern matching with context lines\n- **Workspaces** - Switch between projects\n\n### Research\n\n| Say This | What Happens |\n|----------|--------------|\n| \"research\", \"investigate\", \"find out\", \"best practices\" | Spawns **research-agent** (uses MCP tools) |\n| \"research repo\", \"analyze this repo\", \"clone and analyze\" | Spawns **repo-research-analyst** |\n| \"docs\", \"documentation\", \"library docs\", \"API reference\" | Runs **nia-docs** for library documentation |\n| \"web search\", \"look up\", \"latest\", \"current info\" | Runs **perplexity-search** for web research |\n\n### Debugging\n\n| Say This | What Happens |\n|----------|--------------|\n| \"debug\", \"investigate issue\", \"why is it broken\" | Spawns **debug-agent** (logs, code search, git history) |\n| \"not working\", \"error\", \"failing\", \"what's wrong\" | Same - triggers debug-agent |\n\n### Code Search\n\n| Say This | What Happens |\n|----------|--------------|\n| \"search code\", \"grep\", \"find in code\", \"find text\" | Runs **morph-search** (20x faster than grep) |\n| \"ast\", \"find all calls\", \"refactor\", \"codemod\" | Runs **ast-grep-find** (structural search) |\n| \"search github\", \"find repo\", \"github issue\" | Runs **github-search** |\n\n### Other\n\n| Say This | What Happens |\n|----------|--------------|\n| \"scrape\", \"fetch url\", \"crawl\" | Runs **firecrawl-scrape** |\n| \"recall\", \"what was tried\", \"past reasoning\" | Searches **reasoning history** (see below) |\n| \"create skill\", \"skill triggers\", \"skill system\" | Runs **skill-developer** meta-skill |\n| \"codebase structure\", \"file tree\", \"signatures\" | Runs **repoprompt** for code maps |\n\n---\n\n## Skills vs Agents\n\n**Skills** run in current context. Quick, focused, minimal token overhead.\n\n**Agents** spawn with fresh context. Use for complex tasks that would degrade in a compacted context. They return a summary and optionally create handoffs.\n\n### When to Use Agents\n\n- Brownfield exploration â†’ `rp-explorer` first\n- Multi-step research â†’ `research-agent`\n- Complex debugging â†’ `debug-agent`\n- Implementation with handoffs â†’ `implement_plan`\n\n### Agent Orchestration\n\nFor large implementations, `implement_plan` spawns task agents:\n\n```\nimplement_plan (orchestrator)\n    â”œâ”€â”€ task-agent (task 1) â†’ handoff-01.md\n    â”œâ”€â”€ task-agent (task 2) â†’ handoff-02.md\n    â””â”€â”€ task-agent (task 3) â†’ handoff-03.md\n```\n\nEach task agent:\n1. Reads previous handoff\n2. Does its work with TDD\n3. Creates handoff for next agent\n4. Returns summary to orchestrator\n\n---\n\n## MCP Code Execution\n\nTools are executed via scripts, not loaded into context. This saves tokens.\n\n```bash\n# Example: run a script\nuv run python -m runtime.harness scripts/qlty_check.py --fix\n\n# Available scripts\nls scripts/\n```\n\n### Adding MCP Servers\n\n1. Edit `mcp_config.json` (or `.mcp.json`)\n2. Add API keys to `.env`\n3. Run `uv run mcp-generate`\n\n```json\n{\n  \"mcpServers\": {\n    \"my-server\": {\n      \"type\": \"stdio\",\n      \"command\": \"npx\",\n      \"args\": [\"-y\", \"my-mcp-server\"],\n      \"env\": { \"API_KEY\": \"${MY_API_KEY}\" }\n    }\n  }\n}\n```\n\n---\n\n## Continuity System\n\n### Ledger (within session)\n\nBefore running `/clear`:\n```\n\"Update the ledger, I'm about to clear\"\n```\n\nCreates/updates `CONTINUITY_CLAUDE-<session>.md` with:\n- Goal and constraints\n- What's done, what's next\n- Key decisions\n- Working files\n\nAfter `/clear`, the ledger loads automatically.\n\n### Handoff (between sessions)\n\nWhen done for the day:\n```\n\"Create a handoff, I'm done for today\"\n```\n\nCreates `thoughts/handoffs/<session>/handoff-<timestamp>.md` with:\n- Detailed context\n- Recent changes with file:line references\n- Learnings and patterns\n- Next steps\n\nNext session:\n```\n\"Resume from handoff\"\n```\n\n---\n\n## Hooks System\n\nHooks are the backbone of continuity. They intercept Claude Code lifecycle events and automate state preservation.\n\n### StatusLine (Context Indicator)\n\nThe colored status bar shows context usage in real-time:\n\n```\n45.2K 23% | main U:3 | âœ“ Fixed auth â†’ Add tests\n â†‘     â†‘      â†‘   â†‘        â†‘           â†‘\n â”‚     â”‚      â”‚   â”‚        â”‚           â””â”€â”€ Current focus (from ledger)\n â”‚     â”‚      â”‚   â”‚        â””â”€â”€ Last completed item\n â”‚     â”‚      â”‚   â””â”€â”€ Uncommitted changes (Staged/Unstaged/Added)\n â”‚     â”‚      â””â”€â”€ Git branch\n â”‚     â””â”€â”€ Context percentage used\n â””â”€â”€ Token count\n```\n\n**Color coding:**\n\n| Color | Range | Meaning |\n|-------|-------|---------|\n| ğŸŸ¢ Green | < 60% | Normal - full continuity info shown |\n| ğŸŸ¡ Yellow | 60-79% | Warning - consider creating handoff soon |\n| ğŸ”´ Red | â‰¥ 80% | Critical - shows `âš ` icon, prompts handoff |\n\nThe StatusLine writes context % to `/tmp/claude-context-pct-{SESSION_ID}.txt` (per-session to avoid multi-instance conflicts).\n\n### Hook Events\n\n| Event | When | What This Kit Does |\n|-------|------|-------------------|\n| **SessionStart** | New session, `/clear`, compact | Loads ledger + latest handoff into context |\n| **PreCompact** | Before context compaction | Creates auto-handoff, blocks manual compact |\n| **UserPromptSubmit** | Before processing user message | Shows skill suggestions, context warnings |\n| **PostToolUse** | After Edit/Write/Bash | Tracks modified files for auto-summary |\n| **SubagentStop** | Agent finishes | Logs agent completion |\n| **SessionEnd** | Session closes | Cleanup temp files |\n\n### SessionStart Hook\n\nRuns on: `resume`, `clear`, `compact`\n\n**What it does:**\n1. Finds most recent `CONTINUITY_CLAUDE-*.md` ledger\n2. Extracts Goal and current focus (\"Now:\")\n3. Finds latest handoff (task-*.md or auto-handoff-*.md)\n4. Injects ledger + handoff into system context\n\n**Result:** After `/clear`, Claude immediately knows:\n- What you're working on\n- What's done vs pending\n- Recent decisions and learnings\n\n### PreCompact Hook\n\nRuns: Before any compaction\n\n**Auto-compact (trigger: auto):**\n1. Parses transcript to extract tool calls and responses\n2. Generates detailed `auto-handoff-<timestamp>.md` with:\n   - Files modified\n   - Recent tool outputs\n   - Current work state\n3. Saves to `thoughts/handoffs/<session>/`\n\n**Manual compact (trigger: manual):**\n- Blocks compaction\n- Prompts you to run `/continuity_ledger` first\n\n### UserPromptSubmit Hook\n\nRuns: Every message you send\n\n**Two functions:**\n\n1. **Skill activation** - Scans your message for keywords defined in `skill-rules.json`. Shows relevant skills:\n   ```\n   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n   ğŸ¯ SKILL ACTIVATION CHECK\n   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n   âš ï¸ CRITICAL SKILLS (REQUIRED):\n     â†’ create_handoff\n\n   ğŸ“š RECOMMENDED SKILLS:\n     â†’ commit\n   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n   ```\n\n2. **Context warnings** - Reads context % and shows tiered warnings:\n   - 70%: `Consider handoff when you reach a stopping point.`\n   - 80%: `Recommend: /create_handoff then /clear soon`\n   - 90%: `CONTEXT CRITICAL: Run /create_handoff NOW!`\n\n### How Hooks Work\n\nHooks are **pre-bundled** - no runtime dependencies needed. Shell wrappers call bundled JS:\n\n```bash\n# .claude/hooks/session-start-continuity.sh\n#!/bin/bash\nset -e\ncd \"$CLAUDE_PROJECT_DIR/.claude/hooks\"\ncat | node dist/session-start-continuity.mjs\n```\n\n**For developers** who want to modify hooks:\n```bash\ncd .claude/hooks\nvim src/session-start-continuity.ts  # Edit source\n./build.sh                            # Rebuild dist/\n```\n\nHooks receive JSON input and return JSON output:\n\n```typescript\n// Input varies by event type\ninterface SessionStartInput {\n  source: 'startup' | 'resume' | 'clear' | 'compact';\n  session_id: string;\n}\n\n// Output controls behavior\ninterface HookOutput {\n  result: 'continue' | 'block';  // Block stops the action\n  message?: string;               // Shown to user\n  hookSpecificOutput?: {          // Injected into context\n    additionalContext: string;\n  };\n}\n```\n\n### Registering Hooks\n\nHooks are configured in `.claude/settings.json`:\n\n```json\n{\n  \"statusLine\": {\n    \"type\": \"command\",\n    \"command\": \"$CLAUDE_PROJECT_DIR/.claude/scripts/status.sh\"\n  },\n  \"hooks\": {\n    \"SessionStart\": [{\n      \"matcher\": \"clear\",\n      \"hooks\": [{\n        \"type\": \"command\",\n        \"command\": \"$CLAUDE_PROJECT_DIR/.claude/hooks/session-start-continuity.sh\"\n      }]\n    }]\n  }\n}\n```\n\n**Matcher patterns:** Use `|` for multiple triggers: `\"Edit|Write|Bash\"`\n\n---\n\n## Reasoning History\n\nThe system captures what was tried during development - build failures, fixes, experiments. This creates searchable memory across sessions.\n\n**How it works:**\n\n1. **During work** - The `/commit` skill tracks what was attempted\n2. **On commit** - `generate-reasoning.sh` saves attempts to `.git/claude/commits/<hash>/reasoning.md`\n3. **Later** - \"recall what was tried\" searches past reasoning for similar problems\n\n**Scripts in `.claude/scripts/`:**\n\n| Script | Purpose |\n|--------|---------|\n| `generate-reasoning.sh` | Captures attempts after each commit |\n| `search-reasoning.sh` | Finds past solutions to similar problems |\n| `aggregate-reasoning.sh` | Combines reasoning across commits |\n| `status.sh` | StatusLine - shows context %, git status, focus |\n\n**Example:**\n```\n\"recall what was tried for authentication bugs\"\nâ†’ Searches .git/claude/commits/*/reasoning.md\nâ†’ Returns: \"In commit abc123, tried X but failed because Y, fixed with Z\"\n```\n\nThis is why `/commit` matters - it's not just git, it's building Claude's memory.\n\n---\n\n## TDD Workflow\n\nWhen you say \"implement\", \"add feature\", or \"fix bug\", TDD activates:\n\n```\n1. RED    - Write failing test first\n2. GREEN  - Minimal code to pass\n3. REFACTOR - Clean up, tests stay green\n```\n\n**The rule:** No production code without a failing test.\n\nIf you write code first, the skill prompts you to delete it and start with a test.\n\n---\n\n## Code Quality (qlty)\n\nInstall qlty:\n```bash\ncurl -fsSL https://qlty.sh/install.sh | bash\nqlty init\n```\n\nUse it:\n```\n\"lint my code\"\n\"check code quality\"\n\"auto-fix issues\"\n```\n\nOr directly:\n```bash\nqlty check --fix\nqlty fmt\nqlty metrics\n```\n\n---\n\n## Directory Structure\n\n```\n.claude/\nâ”œâ”€â”€ skills/          # Skill definitions (SKILL.md)\nâ”œâ”€â”€ hooks/           # Session lifecycle (TypeScript)\nâ”œâ”€â”€ agents/          # Agent configurations\nâ”œâ”€â”€ rules/           # Behavioral rules\nâ””â”€â”€ settings.json    # Hook registrations\n\nscripts/             # MCP workflow scripts\nservers/             # Generated tool wrappers (gitignored)\nthoughts/            # Research, plans, handoffs (gitignored)\nsrc/runtime/         # MCP execution runtime\n```\n\n---\n\n## Environment Variables\n\nAdd to `.env`:\n\n```bash\n# Required for paid services\nGITHUB_PERSONAL_ACCESS_TOKEN=\"ghp_...\"\nPERPLEXITY_API_KEY=\"pplx-...\"\nFIRECRAWL_API_KEY=\"fc-...\"\nMORPH_API_KEY=\"sk-...\"\nNIA_API_KEY=\"nk_...\"\n```\n\nServices without API keys still work:\n- `git` - local git operations\n- `ast-grep` - structural code search\n- `repoprompt` - codebase maps\n- `qlty` - code quality (after install)\n\n---\n\n## Troubleshooting\n\n**\"MCP server not configured\"**\n- Check `mcp_config.json` exists\n- Run `uv run mcp-generate`\n- Verify `.env` has required keys\n\n**Skills not working**\n- Run via harness: `uv run python -m runtime.harness scripts/...`\n- Not directly: `python scripts/...`\n\n**Ledger not loading**\n- Check `CONTINUITY_CLAUDE-*.md` exists\n- Verify hooks are registered in `.claude/settings.json`\n- Make hooks executable: `chmod +x .claude/hooks/*.sh`\n\n---\n\n## Acknowledgments\n\n### Patterns & Architecture\n- **[@numman-ali](https://github.com/numman-ali)** - Continuity ledger pattern\n- **[Anthropic](https://anthropic.com)** - [Code Execution with MCP](https://www.anthropic.com/engineering/code-execution-with-mcp)\n- **[obra/superpowers](https://github.com/obra/superpowers)** - Agent orchestration patterns\n- **[EveryInc/compound-engineering-plugin](https://github.com/EveryInc/compound-engineering-plugin)** - Compound engineering workflow\n- **[yoloshii/mcp-code-execution-enhanced](https://github.com/yoloshii/mcp-code-execution-enhanced)** - Enhanced MCP execution\n- **[HumanLayer](https://github.com/humanlayer/humanlayer)** - Agent patterns\n\n### Tools & Services\n- **[qlty](https://github.com/qltysh/qlty)** - Universal code quality CLI (70+ linters)\n- **[ast-grep](https://github.com/ast-grep/ast-grep)** - AST-based code search and refactoring\n- **[Nia](https://trynia.ai)** - Library documentation search\n- **[Morph](https://www.morphllm.com)** - WarpGrep fast code search\n- **[Firecrawl](https://www.firecrawl.dev)** - Web scraping API\n- **[RepoPrompt](https://repoprompt.com)** - Token-efficient codebase maps\n\n---\n\n## License\n\nMIT License - see [LICENSE](LICENSE) for details.\n",
  "installCommand": "git clone https://github.com/parcadei/Continuous-Claude ~/.claude/skills/continuous",
  "defaultBranch": "main",
  "hasMarketplaceJson": false,
  "skillPath": "README.md"
}