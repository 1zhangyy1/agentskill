{
  "id": "a6624c519474cc2c",
  "slug": "cli",
  "name": "Cli",
  "description": "Visual review platform for UI developers and designers",
  "author": "vizzly-testing",
  "authorAvatar": "https://avatars.githubusercontent.com/u/218377636?v=4",
  "repoUrl": "https://github.com/vizzly-testing/cli",
  "repoFullName": "vizzly-testing/cli",
  "stars": 6,
  "forks": 1,
  "category": "other",
  "categories": [
    "other"
  ],
  "tags": [],
  "tier": 3,
  "status": "active",
  "createdAt": "2025-07-23T06:32:36Z",
  "updatedAt": "2025-12-22T17:20:25Z",
  "lastCommitAt": "2025-12-22T17:20:21Z",
  "source": "github-search",
  "collectedAt": "2025-12-23T03:44:48.234Z",
  "authorUrl": "https://github.com/vizzly-testing",
  "license": "MIT",
  "readme": "# Vizzly CLI\n\n> Visual review platform for UI developers and designers\n\n[![npm version](https://img.shields.io/npm/v/@vizzly-testing/cli.svg)](https://www.npmjs.com/package/@vizzly-testing/cli)\n[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)\n\n## What is Vizzly?\n\nVizzly is a visual review platform designed for how modern teams work. Instead of recreating your\ncomponents in a sandboxed environment, Vizzly captures screenshots directly from your functional\ntests. This means you test the *real thing*, not a snapshot.\n\nIt's fast because we don't render anythingâ€”we process the images you provide from any source. Bring\nscreenshots from web apps, mobile apps, or even design mockups, and use our collaborative dashboard\nto streamline the review process between developers and designers.\n\n## Features\n\n- ðŸ“¸ **Smart Screenshots** - Automatic deduplication and intelligent diffing\n- ðŸŽ¨ **Any Screenshot** - Web, mobile, desktop, design mockups, or any visual content\n- ðŸƒ **TDD Mode** - Local visual testing with interactive dashboard, settings, and project tools\n- ðŸ“Š **Beautiful Dashboard** - Intuitive web interface for reviewing changes\n- ðŸ‘¥ **Team Collaboration** - Built for UI developers and designers to work together\n- ðŸ”„ **CI/CD Ready** - GitHub, GitLab, CircleCI, and more\n\n## Quick Start\n\nRequirements: Node.js 20 or newer.\n\n```bash\n# Install globally\nnpm install -g @vizzly-testing/cli\n\n# Initialize your project\nvizzly init\n```\n\n### Authentication\n\nVizzly supports two authentication methods:\n\n**Option 1: User Authentication (Recommended for local development)**\n```bash\n# Authenticate with your Vizzly account\nvizzly login\n\n# Optional: Configure project-specific token\nvizzly project:select\n\n# Run tests\nvizzly run \"npm test\"\n```\n\n**Option 2: API Token (Recommended for CI/CD)**\n```bash\n# Set via environment variable\nexport VIZZLY_TOKEN=your-project-token\n\n# Run tests\nvizzly run \"npm test\"\n```\n\nFor local development with `.env` files:\n```\nVIZZLY_TOKEN=your-project-token\n```\n\nThen add `.env` to your `.gitignore` file. For CI/CD, use your provider's secret management system.\n\n**Token Priority:**\n1. CLI flag (`--token`)\n2. Environment variable (`VIZZLY_TOKEN`)\n3. Project mapping (configured via `vizzly project:select`)\n4. User access token (from `vizzly login`)\n\n### Upload existing screenshots\n\n```bash\nvizzly upload ./screenshots --build-name \"Release v1.2.3\"\n```\n\n### Integrate with your tests\n\n```bash\n# Run tests with cloud integration (CI/CD)\nvizzly run \"npm test\"\n\n# Use TDD mode for local development\nvizzly tdd start      # Start TDD server\nnpm test --watch      # Run tests in watch mode\n```\n\n### In your test code\n\n```javascript\nimport { vizzlyScreenshot } from '@vizzly-testing/cli/client';\n\n// Option 1: Using a Buffer\nconst screenshot = await page.screenshot();\nawait vizzlyScreenshot('homepage', screenshot, {\n  browser: 'chrome',\n  viewport: '1920x1080'\n});\n\n// Option 2: Using a file path\nawait page.screenshot({ path: './screenshots/homepage.png' });\nawait vizzlyScreenshot('homepage', './screenshots/homepage.png', {\n  browser: 'chrome',\n  viewport: '1920x1080'\n});\n```\n\n> **Multi-Language Support**: Currently available as a JavaScript/Node.js SDK with Python, Ruby, and\n> other language bindings coming soon. The client SDK is lightweight and simply POSTs screenshot\n> data to the CLI for processing.\n\n## Commands\n\n### Authentication Commands\n\n```bash\nvizzly login                        # Authenticate with your Vizzly account\nvizzly logout                       # Clear stored authentication tokens\nvizzly whoami                       # Show current user and authentication status\nvizzly project:select               # Configure project-specific token\nvizzly project:list                 # Show all configured projects\nvizzly project:token                # Display project token for current directory\nvizzly project:remove               # Remove project configuration\n```\n\n#### Login Command\nAuthenticate using OAuth 2.0 device flow. Opens your browser to authorize the CLI with your Vizzly account.\n\n```bash\n# Interactive browser-based login\nvizzly login\n\n# JSON output for scripting\nvizzly login --json\n```\n\n**Features:**\n- Browser auto-opens with pre-filled device code\n- Secure OAuth 2.0 device authorization flow\n- 30-day token expiry with automatic refresh\n- Tokens stored securely in `~/.vizzly/config.json` with 0600 permissions\n\n#### Logout Command\nClear all stored authentication tokens from your machine.\n\n```bash\n# Clear all tokens\nvizzly logout\n\n# JSON output\nvizzly logout --json\n```\n\nRevokes tokens on the server and removes them from local storage.\n\n#### Whoami Command\nDisplay current authentication status, user information, and organizations.\n\n```bash\n# Show user and authentication info\nvizzly whoami\n\n# JSON output for scripting\nvizzly whoami --json\n```\n\nShows:\n- Current user email and name\n- Organizations you belong to\n- Token status and expiry\n- Project mappings (if any)\n\n#### Project Commands\nConfigure directory-specific project tokens for multi-project workflows.\n\n```bash\n# Select a project for current directory\nvizzly project:select\n\n# List all configured projects\nvizzly project:list\n\n# Show token for current directory\nvizzly project:token\n\n# Remove project configuration\nvizzly project:remove\n```\n\n**Use case:** Working on multiple Vizzly projects? Configure each project directory with its specific token. The CLI automatically uses the right token based on your current directory.\n\n### Upload Screenshots\n```bash\nvizzly upload <directory>           # Upload screenshots from directory\nvizzly upload ./screenshots --wait  # Wait for processing\nvizzly upload ./screenshots --upload-all  # Upload all without deduplication\nvizzly upload ./screenshots --parallel-id \"ci-run-123\"  # For parallel CI builds\n```\n\n### Run Tests with Integration\n```bash\nvizzly run \"npm test\"               # Run with Vizzly integration\nvizzly run \"pytest\" --port 3002     # Custom port\nvizzly run \"npm test\" --wait        # Wait for build completion\nvizzly run \"npm test\" --allow-no-token  # Run without API token\nvizzly run \"npm test\" --parallel-id \"ci-run-123\"  # For parallel CI builds\n```\n\n#### Run Command Options\n\n**Server Configuration:**\n- `--port <port>` - Port for screenshot server (default: 47392)\n- `--timeout <ms>` - Server timeout in milliseconds (default: 30000)\n\n**Build Configuration:**\n- `-b, --build-name <name>` - Custom build name\n- `--branch <branch>` - Git branch override\n- `--commit <sha>` - Git commit SHA override\n- `--message <msg>` - Commit message\n- `--environment <env>` - Environment name (default: test)\n\n**Processing Options:**\n- `--wait` - Wait for build completion and exit with appropriate code\n- `--threshold <number>` - Comparison threshold (CIEDE2000 Delta E, default: 2.0)\n- `--upload-timeout <ms>` - Upload wait timeout in ms\n- `--upload-all` - Upload all screenshots without SHA deduplication\n\n**Parallel Execution:**\n- `--parallel-id <id>` - Unique identifier for parallel test execution (also via `VIZZLY_PARALLEL_ID`)\n\n**Development & Testing:**\n- `--allow-no-token` - Allow running without API token (useful for local development)\n- `--token <token>` - API token override\n\n## TDD Command\n\nFor local development with visual testing, use the `tdd` command:\n\n```bash\n# Start TDD server (runs in background)\nvizzly tdd start\n\n# Run your tests in watch mode (same terminal or new one)\nnpm test -- --watch\n\n# View the dashboard at http://localhost:47392\n```\n\n**Interactive Dashboard:** The TDD dashboard provides real-time feedback:\n- **Visual Comparisons** - See diffs as tests run with multiple view modes\n- **Baseline Management** - Accept/reject changes directly from the UI\n- **Configuration Editor** - Edit settings without touching config files\n- **Project Management** - Login, link directories to cloud projects\n- **Test Statistics** - Real-time pass/fail metrics\n- **Dark Theme** - Easy on the eyes during long sessions\n\n**TDD Subcommands:**\n\n```bash\n# Start the TDD server (primary workflow)\nvizzly tdd start [options]\n\n# Run tests once with ephemeral server (generates static report)\nvizzly tdd run \"npm test\" [options]\n\n# Check TDD server status\nvizzly tdd status\n\n# Stop a running TDD server\nvizzly tdd stop\n```\n\n**TDD Command Options:**\n- `--set-baseline` - Accept current screenshots as new baseline\n- `--baseline-build <id>` - Use specific build as baseline (requires API token)\n- `--threshold <number>` - Comparison threshold (CIEDE2000 Delta E, default: 2.0)\n- `--port <port>` - Server port (default: 47392)\n- `--timeout <ms>` - Server timeout (default: 30000)\n- `--open` - Auto-open dashboard in browser (start command only)\n\n### Setup and Status Commands\n```bash\nvizzly init                         # Create vizzly.config.js with defaults\nvizzly status <build-id>            # Check build progress and results\nvizzly status <build-id> --verbose  # Detailed build information\nvizzly status <build-id> --json     # Machine-readable output\nvizzly finalize <parallel-id>       # Finalize parallel build after all shards complete\nvizzly doctor                       # Fast local preflight (no network)\nvizzly doctor --api                 # Include API connectivity checks\n```\n\n#### Init Command\nCreates a basic `vizzly.config.js` configuration file with sensible defaults. No interactive\nprompts - just generates a clean config you can customize.\n\n```bash\nvizzly init           # Create config file\nvizzly init --force   # Overwrite existing config\n```\n\n#### Status Command\nCheck the progress and results of your builds. Shows comprehensive information including:\n- Build status and progress\n- Screenshot and comparison counts (new, changed, identical)\n- Git branch and commit details\n- Direct web dashboard link\n- Timing and execution information\n\n```bash\n# Basic status check\nvizzly status abc123-def456-build-id\n\n# Detailed information for debugging\nvizzly status abc123-def456-build-id --verbose\n\n# JSON output for CI/CD integration\nvizzly status abc123-def456-build-id --json\n```\n\n### Doctor\n- Purpose: Quickly validate your local setup without network calls by default.\n- Checks: Node.js version (>= 20), `apiUrl` format, comparison `threshold`, effective `port` (default 47392).\n- Optional: Add `--api` to verify connectivity using your `VIZZLY_TOKEN`.\n\nExamples:\n```bash\n# Local-only checks\nvizzly doctor\n\n# Include API connectivity\nVIZZLY_TOKEN=your-token vizzly doctor --api\n\n# JSON output for tooling\nvizzly doctor --json\n```\n\nThe `tdd` command provides fast local development with immediate visual feedback. See the\n[TDD Mode Guide](./docs/tdd-mode.md) for complete details on local visual testing.\n\n## Configuration\n\nCreate a `vizzly.config.js` file with `vizzly init` or manually:\n\n```javascript\nexport default {\n  // Server configuration\n  server: {\n    port: 47392,\n    timeout: 30000\n  },\n\n  // Comparison configuration (CIEDE2000 Delta E: 0=exact, 1=JND, 2=recommended)\n  comparison: {\n    threshold: 2.0,\n    ignoreAntialiasing: true\n  },\n\n  // Upload configuration\n  upload: {\n    concurrency: 5,\n    timeout: 30000\n  }\n};\n```\n\nRun `vizzly init` to generate this file automatically with sensible defaults.\n\n## Config Reference\n\nFor the full configuration schema and CLI options, see docs/api-reference.md.\n\n## Framework Examples\n\n### Playwright\n```javascript\nimport { vizzlyScreenshot } from '@vizzly-testing/cli/client';\n\ntest('homepage test', async ({ page }) => {\n  await page.goto('/');\n  const screenshot = await page.screenshot();\n  await vizzlyScreenshot('homepage', screenshot, {\n    browser: 'chrome',\n    viewport: '1920x1080'\n  });\n});\n```\n\n### Cypress\n```javascript\n// cypress/support/commands.js\nCypress.Commands.add('vizzlyScreenshot', (name, properties = {}) => {\n  cy.screenshot(name, { capture: 'viewport' });\n  cy.readFile(`cypress/screenshots/${name}.png`, 'base64').then((imageBase64) => {\n    const imageBuffer = Buffer.from(imageBase64, 'base64');\n    return vizzlyScreenshot(name, imageBuffer, {\n      browser: Cypress.browser.name,\n      ...properties\n    });\n  });\n});\n```\n\n## CI/CD Integration\n\nFor CI/CD pipelines, use the `--wait` flag to wait for visual comparison results and get appropriate exit codes:\n\n### GitHub Actions\n```yaml\n- name: Visual Tests\n  run: npx vizzly run \"npm test\" --wait\n  env:\n    VIZZLY_TOKEN: ${{ secrets.VIZZLY_TOKEN }}\n    # Optional: Provide correct git information from GitHub context\n    VIZZLY_COMMIT_MESSAGE: ${{ github.event.pull_request.head.commit.message || github.event.head_commit.message }}\n    VIZZLY_COMMIT_SHA: ${{ github.event.pull_request.head.sha || github.event.head_commit.id }}\n    VIZZLY_BRANCH: ${{ github.head_ref || github.ref_name }}\n```\n\n### Parallel Builds in CI\n\nFor parallel test execution, use `--parallel-id` to ensure all shards contribute to the same build:\n\n```yaml\n# GitHub Actions with parallel matrix\njobs:\n  e2e-tests:\n    strategy:\n      matrix:\n        shard: [1/4, 2/4, 3/4, 4/4]\n    steps:\n      - name: Run tests with Vizzly\n        run: |\n          npx vizzly run \"npm test -- --shard=${{ matrix.shard }}\" \\\n            --parallel-id=\"${{ github.run_id }}-${{ github.run_attempt }}\"\n        env:\n          VIZZLY_TOKEN: ${{ secrets.VIZZLY_TOKEN }}\n\n  finalize-e2e:\n    needs: e2e-tests\n    runs-on: ubuntu-latest\n    if: always() && needs.e2e-tests.result == 'success'\n    steps:\n      - name: Finalize parallel build\n        run: |\n          npx vizzly finalize \"${{ github.run_id }}-${{ github.run_attempt }}\"\n        env:\n          VIZZLY_TOKEN: ${{ secrets.VIZZLY_TOKEN }}\n```\n\n### GitLab CI\n```yaml\nvisual-tests:\n  stage: test\n  image: node:20\n  script:\n    - npm ci\n    - npx vizzly run \"npm test\" --wait\n  variables:\n    VIZZLY_TOKEN: $VIZZLY_TOKEN\n```\n\nThe `--wait` flag ensures the process:\n- Waits for all screenshots to be processed\n- Exits with code `1` if visual differences are detected\n- Exits with code `0` if all comparisons pass\n- Allows your CI to fail appropriately when visual regressions occur\n\n## API Reference\n\n### `vizzlyScreenshot(name, imageBuffer, properties)`\nSend a screenshot to Vizzly.\n- `name` (string): Screenshot identifier\n- `imageBuffer` (Buffer | string): Image data as Buffer, or file path to an image\n- `properties` (object): Metadata for organization\n\n**File Path Support:**\n- Accepts both absolute and relative paths\n- Automatically reads the file and converts to Buffer internally\n- Works with any PNG image file\n\n### `isVizzlyEnabled()`\nCheck if Vizzly is enabled in the current environment.\n\n## AI & Editor Integrations\n\n### Claude Code Plugin\n\nVizzly includes built-in support for [Claude Code](https://claude.com/code), Anthropic's official CLI tool. The integration brings AI-powered visual testing workflows directly into your development environment.\n\n**Features:**\n- ðŸ¤– **AI-assisted debugging** - Get intelligent analysis of visual regressions\n- ðŸ“Š **TDD status insights** - Check dashboard status with contextual suggestions\n- ðŸ” **Smart diff analysis** - AI helps determine if changes should be accepted or fixed\n- âœ¨ **Test coverage suggestions** - Get framework-specific screenshot recommendations\n- ðŸ› ï¸ **Interactive setup** - Guided configuration and CI/CD integration help\n\n**Getting Started with Claude Code:**\n\n1. **Install Claude Code** (if you haven't already):\n   ```bash\n   npm install -g @anthropic-ai/claude-code\n   ```\n\n2. **Install the Vizzly plugin** via Claude Code marketplace:\n   ```\n   /plugin marketplace add vizzly-testing/cli\n   ```\n\n3. **Use AI-powered workflows** with slash commands:\n   ```\n   /vizzly:check-visual-tests      # Check dev server status with AI insights\n   /vizzly:debug-visual-regression # Analyze visual failures with AI\n   /vizzly:suggest-screenshots     # Find test coverage gaps\n   /vizzly:setup                   # Interactive setup wizard\n   ```\n\nThe plugin works seamlessly with both local dev mode and cloud builds, providing contextual help based on your current workflow.\n\n## Plugin Ecosystem\n\nVizzly supports a powerful plugin system that allows you to extend the CLI with custom\ncommands. Plugins are automatically discovered from `@vizzly-testing/*` packages or can be\nexplicitly configured.\n\n### Official Plugins\n\n- **Claude Code Integration** *(built-in)* - AI-powered visual testing workflows for Claude Code\n- **[@vizzly-testing/storybook](https://npmjs.com/package/@vizzly-testing/storybook)** *(coming\n  soon)* - Capture screenshots from Storybook builds\n\n### Using Plugins\n\nPlugins under the `@vizzly-testing/*` scope are auto-discovered:\n\n```bash\n# Install plugin\nnpm install @vizzly-testing/storybook\n\n# Use immediately - commands are automatically available!\nvizzly storybook ./storybook-static\n\n# Plugin commands show in help\nvizzly --help\n```\n\n### Creating Plugins\n\nYou can create your own plugins to add custom commands:\n\n```javascript\n// plugin.js\nexport default {\n  name: 'my-plugin',\n  version: '1.0.0',\n  register(program, { config, logger, services }) {\n    program\n      .command('my-command')\n      .description('My custom command')\n      .action(async () => {\n        logger.info('Running my command!');\n      });\n  }\n};\n```\n\nAdd to your `vizzly.config.js`:\n\n```javascript\nexport default {\n  plugins: ['./plugin.js']\n};\n```\n\nSee the [Plugin Development Guide](./docs/plugins.md) for complete documentation and examples.\n\n## Documentation\n\n- [Getting Started](./docs/getting-started.md)\n- [Authentication Guide](./docs/authentication.md)\n- [Upload Command Guide](./docs/upload-command.md)\n- [Test Integration Guide](./docs/test-integration.md)\n- [Dev Mode Guide](./docs/dev-mode.md)\n- [Plugin Development](./docs/plugins.md)\n- [API Reference](./docs/api-reference.md)\n- [Doctor Command](./docs/doctor-command.md)\n\n**AI & Editor Integrations:**\n- Claude Code Plugin - Built-in support (see [AI & Editor Integrations](#ai--editor-integrations) above)\n\n## Environment Variables\n\n### Authentication\n- `VIZZLY_TOKEN`: API authentication token (project token or access token). Example: `export VIZZLY_TOKEN=your-token`.\n  - For local development: Use `vizzly login` instead of manually managing tokens\n  - For CI/CD: Use project tokens from environment variables\n\n### Core Configuration\n- `VIZZLY_API_URL`: Override API base URL. Default: `https://app.vizzly.dev`.\n- `VIZZLY_LOG_LEVEL`: Logger level. One of `debug`, `info`, `warn`, `error`. Example: `export VIZZLY_LOG_LEVEL=debug`.\n\n### Parallel Builds\n- `VIZZLY_PARALLEL_ID`: Unique identifier for parallel test execution. Example: `export VIZZLY_PARALLEL_ID=ci-run-123`.\n\n### Git Information Override\nFor enhanced CI/CD integration, you can override git detection with these environment variables:\n\n- `VIZZLY_COMMIT_SHA`: Override detected commit SHA. Useful in CI environments.\n- `VIZZLY_COMMIT_MESSAGE`: Override detected commit message. Useful in CI environments.\n- `VIZZLY_BRANCH`: Override detected branch name. Useful in CI environments.\n- `VIZZLY_PR_NUMBER`: Override detected pull request number. Useful for PR-specific builds.\n\n**Example for GitHub Actions:**\n```yaml\nenv:\n  VIZZLY_COMMIT_MESSAGE: ${{ github.event.pull_request.head.commit.message || github.event.head_commit.message }}\n  VIZZLY_COMMIT_SHA: ${{ github.event.pull_request.head.sha || github.event.head_commit.id }}\n  VIZZLY_BRANCH: ${{ github.head_ref || github.ref_name }}\n  VIZZLY_PR_NUMBER: ${{ github.event.pull_request.number }}\n```\n\nThese variables take highest priority over both CLI arguments and automatic git detection.\n\n## Contributing\n\nWe welcome contributions! Whether you're fixing bugs, adding features, or improving documentation,\nyour help makes Vizzly better for everyone.\n\n### Getting Started\n\n1. Fork the repository on [GitHub](https://github.com/vizzly-testing/cli)\n2. Clone your fork locally: `git clone https://github.com/your-username/cli.git`\n3. Install dependencies: `npm install`\n4. Run tests to ensure everything works: `npm test`\n\n### Development Workflow\n\n1. Create a feature branch: `git checkout -b feature/your-feature-name`\n2. Make your changes and **add tests** for any new functionality\n3. Run the linter: `npm run lint`\n4. Run tests: `npm test`\n5. Commit your changes using [gitmoji](https://gitmoji.dev/) format: `git commit -m 'âœ¨ Add your feature'`\n6. Push to your fork: `git push origin feature/your-feature-name`\n7. Open a Pull Request\n\n### Reporting Issues\n\nFound a bug or have a feature request? Please [open an issue](https://github.com/vizzly-testing/cli/issues) with:\n\n- A clear description of the problem or request\n- Steps to reproduce (for bugs)\n- Your environment details (OS, Node.js version, etc.)\n\n### Development Setup\n\nThe CLI is built with modern JavaScript and requires Node.js 20+ (LTS). See the development scripts\nin `package.json` for available commands.\n\n## License\n\nMIT Â© Stubborn Mule Software\n",
  "installCommand": "git clone https://github.com/vizzly-testing/cli ~/.claude/skills/cli",
  "defaultBranch": "main",
  "hasMarketplaceJson": false,
  "skillPath": "README.md"
}