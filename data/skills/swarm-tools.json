{
  "id": "cff7743cd8d31c78",
  "slug": "swarm-tools",
  "name": "Swarm Tools",
  "description": "ğŸ Multi-agent swarm coordination for OpenCode with learning capabilities, beads integration, and Agent Mail",
  "author": "joelhooks",
  "authorAvatar": "https://avatars.githubusercontent.com/u/86834?v=4",
  "repoUrl": "https://github.com/joelhooks/swarm-tools",
  "repoFullName": "joelhooks/swarm-tools",
  "stars": 126,
  "forks": 4,
  "category": "ai-ml",
  "categories": [
    "ai-ml"
  ],
  "tags": [
    "ai-agents",
    "machine-learning",
    "multi-agent",
    "opencode",
    "swarm"
  ],
  "tier": 1,
  "status": "active",
  "createdAt": "2025-12-08T03:01:51Z",
  "updatedAt": "2025-12-19T03:12:44Z",
  "lastCommitAt": "2025-12-19T03:13:06Z",
  "source": "github-search",
  "collectedAt": "2025-12-19T03:45:45.933Z",
  "authorUrl": "https://github.com/joelhooks",
  "license": null,
  "readme": "# opencode-swarm-plugin\n\n[![npm version](https://img.shields.io/npm/v/opencode-swarm-plugin.svg)](https://www.npmjs.com/package/opencode-swarm-plugin)\n[![Documentation](https://img.shields.io/badge/docs-swarmtools.ai-blue)](https://swarmtools.ai/docs)\n[![Website](https://img.shields.io/badge/website-swarmtools.ai-orange)](https://swarmtools.ai)\n\n```\n â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—    â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ•—\n â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ•‘\n â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘ â–ˆâ•— â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ•‘\n â•šâ•â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘\n â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â•šâ•â• â–ˆâ–ˆâ•‘\n â•šâ•â•â•â•â•â•â• â•šâ•â•â•â•šâ•â•â• â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â•â•šâ•â•     â•šâ•â•\n\n    \\ ` - ' /\n   - .(o o). -\n    (  >.<  )        Break big tasks into small ones.\n     /|   |\\         Spawn agents to work in parallel.\n    (_|   |_)        Learn from what works.\n      bzzzz...\n```\n\n> **[ğŸ swarmtools.ai](https://swarmtools.ai)** | **[ğŸ“š Documentation](https://swarmtools.ai/docs)**\n>\n> **Swarm Tools** - Multi-agent coordination for AI coding. This monorepo contains the core packages that power parallel task decomposition, actor-model messaging, and learning systems.\n\n## The Problem\n\nYou're working with an AI coding agent. You ask it to \"add OAuth authentication.\" It starts writing code. Five minutes later, you realize it's going down the wrong path. Or it's touching files it shouldn't. Or it's making changes that conflict with what you just did in another session.\n\n**The fundamental issue:** AI agents are single-threaded, context-limited, and have no memory of what worked before.\n\n## The Solution\n\nWhat if the agent could:\n\n- **Break the task into pieces** that can be worked on simultaneously\n- **Spawn parallel workers** that don't step on each other\n- **Remember what worked** and avoid patterns that failed\n- **Survive context compaction** without losing progress\n\nThat's what Swarm does.\n\n## How It Works\n\n```\n                            \"Add OAuth\"\n                                 â”‚\n                                 â–¼\n                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                    â”‚      COORDINATOR       â”‚\n                    â”‚                        â”‚\n                    â”‚  1. Query CASS:        â”‚\n                    â”‚     \"How did we solve  â”‚\n                    â”‚      this before?\"     â”‚\n                    â”‚                        â”‚\n                    â”‚  2. Pick strategy:     â”‚\n                    â”‚     file-based?        â”‚\n                    â”‚     feature-based?     â”‚\n                    â”‚     risk-based?        â”‚\n                    â”‚                        â”‚\n                    â”‚  3. Break into pieces  â”‚\n                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                                 â”‚\n           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n           â–¼                     â–¼                     â–¼\n    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n    â”‚  Worker A   â”‚       â”‚  Worker B   â”‚       â”‚  Worker C   â”‚\n    â”‚             â”‚       â”‚             â”‚       â”‚             â”‚\n    â”‚ auth/oauth  â”‚       â”‚ auth/sessionâ”‚       â”‚ auth/tests  â”‚\n    â”‚   ğŸ”’ files  â”‚       â”‚   ğŸ”’ files  â”‚       â”‚   ğŸ”’ files  â”‚\n    â”‚             â”‚       â”‚             â”‚       â”‚             â”‚\n    â”‚ \"I need     â”‚â”€â”€â”€â”€â”€â”€â–ºâ”‚ \"Got it,    â”‚       â”‚ \"Running    â”‚\n    â”‚  session    â”‚       â”‚  here's the â”‚       â”‚  tests...\"  â”‚\n    â”‚  types\"     â”‚       â”‚  interface\" â”‚       â”‚             â”‚\n    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n           â”‚                     â”‚                     â”‚\n           â”‚                     â”‚                     â”‚\n           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                                 â”‚\n                                 â–¼\n                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                    â”‚    LEARNING SYSTEM     â”‚\n                    â”‚                        â”‚\n                    â”‚  \"File-based split     â”‚\n                    â”‚   worked well for      â”‚\n                    â”‚   auth - 3 workers,    â”‚\n                    â”‚   15 min, 0 conflicts\" â”‚\n                    â”‚                        â”‚\n                    â”‚  Next time: use this   â”‚\n                    â”‚  pattern again         â”‚\n                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n### The Flow\n\n1. **You give it a task**: `/swarm \"Add OAuth authentication\"`\n\n2. **It queries history**: \"Have we done something like this before?\" (via CASS - cross-agent session search)\n\n3. **It picks a strategy**:\n   - **File-based**: \"Split by directory structure\" (good for refactoring)\n   - **Feature-based**: \"Split by vertical slices\" (good for new features)\n   - **Risk-based**: \"Tests first, then implementation\" (good for bug fixes)\n   - **Research-based**: \"Explore before committing\" (good for unknowns)\n\n4. **It breaks the work into beads** (git-backed issues):\n\n   ```\n   Epic: Add OAuth\n   â”œâ”€ Bead 1: OAuth provider integration (src/auth/oauth.ts)\n   â”œâ”€ Bead 2: Session management (src/auth/session.ts)\n   â””â”€ Bead 3: Integration tests (tests/auth/)\n   ```\n\n5. **It spawns parallel workers**:\n   - Each worker reserves its files (no conflicts)\n   - Workers coordinate via Swarm Mail (actor-model messaging)\n   - Progress is checkpointed at 25%, 50%, 75%\n\n6. **It learns from the outcome**:\n   - Fast + success = good signal\n   - Slow + errors = bad signal\n   - Patterns that fail >60% of the time get auto-inverted\n\n## What Makes It Different\n\n### It Survives Context Death\n\nOpenCode compacts context when it gets too long. Swarms used to die when this happened. Not anymore.\n\n```\n     Session 1                    Context                   Session 2\n         â”‚                       Compacts                       â”‚\n         â–¼                          ğŸ’¥                          â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ swarm running   â”‚                                   â”‚ swarm_recover() â”‚\nâ”‚ â”œâ”€ 25% âœ“ saved  â”‚                                   â”‚       â”‚         â”‚\nâ”‚ â”œâ”€ 50% âœ“ saved  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚       â–¼         â”‚\nâ”‚ â””â”€ 75% âœ“ saved  â”‚      checkpoints survive          â”‚ resume at 75%   â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n**Checkpoints capture:**\n\n- Which subtasks are done/in-progress/pending\n- File reservations (who owns what)\n- Shared context for workers\n- Progress percentage\n\n**Recovery restores:**\n\n- Swarm state from last checkpoint\n- File locks (prevents conflicts)\n- Worker context (what they were doing)\n\nAll stored in PGLite (embedded Postgres) - no external servers, survives across sessions.\n\n### It Learns From Outcomes\n\nEvery swarm completion records:\n\n- Duration (how long did it take?)\n- Errors (how many retries?)\n- Files touched (did scope match prediction?)\n- Success (did tests pass? were changes accepted?)\n\nThis feeds back into the decomposition strategy:\n\n```\n                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                    â”‚         LEARNING LOOP           â”‚\n                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                                    â”‚\n        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n        â–¼                           â–¼                           â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚   OUTCOMES    â”‚           â”‚   PATTERNS    â”‚           â”‚ ANTI-PATTERNS â”‚\nâ”‚               â”‚           â”‚               â”‚           â”‚               â”‚\nâ”‚ fast+success  â”‚           â”‚  candidate    â”‚           â”‚ >60% failure  â”‚\nâ”‚ = good signal â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚      â†“        â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ = auto-invert â”‚\nâ”‚               â”‚           â”‚  established  â”‚           â”‚               â”‚\nâ”‚ slow+errors   â”‚           â”‚      â†“        â”‚           â”‚ \"split by X\"  â”‚\nâ”‚ = bad signal  â”‚           â”‚    proven     â”‚           â”‚ becomes       â”‚\nâ”‚               â”‚           â”‚               â”‚           â”‚ \"DON'T split  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚  by X\"        â”‚\n                                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\n                    Confidence decays over 90 days\n                    unless patterns are revalidated\n```\n\n**Pattern maturity lifecycle:**\n\n- `candidate` â†’ new pattern, low confidence\n- `established` â†’ validated 3+ times\n- `proven` â†’ 10+ successes (gets 1.5x weight in future decompositions)\n- `deprecated` â†’ >60% failure rate (auto-inverted to anti-pattern)\n\n**Confidence decay:** Patterns fade over 90 days unless revalidated. Prevents stale knowledge from dominating.\n\n### Swarm Mail: Actor-Model Coordination\n\nWorkers don't just run in parallel - they coordinate via **Swarm Mail**, an event-sourced actor model built on local-first primitives.\n\n**What makes Swarm Mail different from traditional agent messaging:**\n\n- **Actor model over durable streams** - DurableMailbox, DurableLock, DurableDeferred (inspired by Electric SQL patterns)\n- **Local-first with PGlite** - embedded Postgres, no external servers, survives across sessions\n- **Event-sourced coordination** - append-only log, materialized views, full audit trail\n- **Context-safe by design** - hard caps on inbox (max 5 messages), thread summarization, body-on-demand\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                      SWARM MAIL                              â”‚\nâ”‚                                                              â”‚\nâ”‚  Worker A: \"I need the SessionUser type\"                    â”‚\nâ”‚            â†“                                                 â”‚\nâ”‚  Worker B: \"Here's the interface:\"                          â”‚\nâ”‚            interface SessionUser {                           â”‚\nâ”‚              id: string                                      â”‚\nâ”‚              email: string                                   â”‚\nâ”‚              roles: string[]                                 â”‚\nâ”‚            }                                                 â”‚\nâ”‚            â†“                                                 â”‚\nâ”‚  Worker A: \"Got it, implementing OAuth flow now\"            â”‚\nâ”‚                                                              â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n**File reservations** prevent conflicts:\n\n- Worker A reserves `src/auth/oauth.ts` (exclusive via DurableLock)\n- Worker B tries to reserve it â†’ blocked\n- Worker B waits or works on something else\n\n**Inbox limits** prevent context bloat:\n\n- Max 5 messages per fetch (headers only)\n- Read individual message bodies on demand\n- Thread summarization for long conversations\n\nAll coordination state survives context compaction and session restarts.\n\n#### Architecture: 3-Tier Stack\n\nSwarm Mail is built on **Durable Streams primitives** (inspired by Kyle Matthews' [Electric SQL patterns](https://x.com/kylemathews/status/1999896667030700098)):\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                     SWARM MAIL STACK                        â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚                                                             â”‚\nâ”‚  TIER 3: COORDINATION                                       â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚\nâ”‚  â”‚  ask<Req, Res>() - Request/Response (RPC-style)       â”‚  â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚\nâ”‚                          â”‚                                  â”‚\nâ”‚  TIER 2: PATTERNS        â–¼                                  â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚\nâ”‚  â”‚ DurableMailbox  â”‚  â”‚  DurableLock    â”‚                  â”‚\nâ”‚  â”‚ Actor Inbox     â”‚  â”‚  File Mutex     â”‚                  â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚\nâ”‚          â”‚                    â”‚                             â”‚\nâ”‚  TIER 1: PRIMITIVES           â–¼                             â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚\nâ”‚  â”‚ DurableCursor   â”‚  â”‚ DurableDeferred â”‚                  â”‚\nâ”‚  â”‚ Checkpointed    â”‚  â”‚ Distributed     â”‚                  â”‚\nâ”‚  â”‚ Reader          â”‚  â”‚ Promise         â”‚                  â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚\nâ”‚                          â”‚                                  â”‚\nâ”‚  STORAGE                 â–¼                                  â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚\nâ”‚  â”‚      PGLite (Embedded Postgres) + Migrations          â”‚  â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚\nâ”‚                                                             â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n**Tier 1 - Primitives:**\n\n- **DurableCursor** - Positioned event stream consumption with checkpointing (exactly-once)\n- **DurableDeferred** - URL-addressable distributed promises for async coordination\n- **DurableLock** - CAS-based mutual exclusion for file reservations (TTL + retry/backoff)\n\n**Tier 2 - Patterns:**\n\n- **DurableMailbox** - Actor inbox with typed envelopes (sender, replyTo, payload)\n- File reservation protocol built on DurableLock\n\n**Tier 3 - Coordination:**\n\n- **ask()** pattern - Synchronous-style RPC over async streams (creates DurableDeferred, appends to mailbox, returns promise)\n\n#### Message Flow Example\n\n```\nAgent A                    Event Stream                Agent B\n   â”‚                            â”‚                         â”‚\n   â”‚  ask(\"get SessionUser\")    â”‚                         â”‚\n   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                         â”‚\n   â”‚  (creates deferred)        â”‚                         â”‚\n   â”‚                            â”‚   consume event         â”‚\n   â”‚                            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚\n   â”‚                            â”‚                         â”‚\n   â”‚                            â”‚   reply to deferred     â”‚\n   â”‚                            â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\n   â”‚  await deferred.value      â”‚                         â”‚\n   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                         â”‚\n   â”‚                            â”‚                         â”‚\n   â”‚  SessionUser interface     â”‚                         â”‚\n   â”‚                            â”‚                         â”‚\n```\n\n**Why this matters:**\n\n- No external servers (Redis, Kafka, NATS) - just PGlite\n- Full audit trail - every message is an event\n- Resumable - cursors checkpoint position, survive crashes\n- Type-safe - Effect-TS with full inference\n\n> **Architecture deep-dive:** See [Swarm Mail Architecture](packages/opencode-swarm-plugin/docs/swarm-mail-architecture.md) for complete implementation details, database schemas, and Effect-TS patterns.\n\n### It Has Skills\n\nSkills are knowledge packages agents can load. Teach once, use everywhere.\n\n```typescript\nskills_use((name = \"testing-patterns\")); // Load Feathers seams + Beck's 4 rules\nskills_use((name = \"swarm-coordination\")); // Load swarm workflow patterns\n```\n\n**Bundled skills:**\n\n- `testing-patterns` - 25 dependency-breaking techniques, characterization tests\n- `swarm-coordination` - Multi-agent decomposition, file reservations\n- `cli-builder` - Argument parsing, help text, subcommands\n- `system-design` - Architecture decisions, module boundaries\n- `learning-systems` - Confidence decay, pattern maturity\n\n**Create your own:**\n\n```bash\nswarm init  # Creates .opencode/skills/ in project\n```\n\nSkills can include:\n\n- Step-by-step workflows\n- Code examples\n- Reference documentation\n- Executable scripts\n\n## Monorepo Structure\n\nThis is a Bun + Turborepo monorepo with two packages:\n\n```\nopencode-swarm-plugin/\nâ”œâ”€â”€ packages/\nâ”‚   â”œâ”€â”€ swarm-mail/              # Event sourcing primitives\nâ”‚   â”‚   â””â”€â”€ src/streams/         # DurableMailbox, DurableLock, etc.\nâ”‚   â””â”€â”€ opencode-swarm-plugin/   # Main plugin\nâ”‚       â”œâ”€â”€ src/                 # Plugin tools\nâ”‚       â”œâ”€â”€ global-skills/       # Bundled skills\nâ”‚       â””â”€â”€ docs/                # Architecture docs\nâ”œâ”€â”€ package.json                 # Workspace root\nâ””â”€â”€ turbo.json                   # Pipeline config\n```\n\n### swarm-mail\n\nStandalone event sourcing package for multi-agent coordination:\n\n- `EventStore` - append-only event log with PGLite\n- `Projections` - materialized views (agents, messages, reservations)\n- Effect-TS durable primitives (DurableMailbox, DurableCursor, DurableLock, DurableDeferred)\n- `DatabaseAdapter` interface for dependency injection\n\n### opencode-swarm-plugin\n\nOpenCode plugin providing:\n\n- Beads integration (git-backed issue tracking)\n- Swarm coordination (task decomposition, parallel agents)\n- Agent Mail (inter-agent messaging)\n- Learning system (pattern maturity, anti-pattern detection)\n- Skills system (knowledge injection)\n\n## Install\n\n```bash\nnpm install -g opencode-swarm-plugin@latest\nswarm setup\n```\n\n## Usage\n\n```bash\n/swarm \"Add user authentication with OAuth\"\n```\n\nThe coordinator will:\n\n1. Query CASS for similar past tasks\n2. Select decomposition strategy\n3. Break into subtasks (beads)\n4. Spawn parallel workers\n5. Track progress with checkpoints\n6. Record outcome for learning\n\n## Architecture\n\nEverything runs in-process. No external servers.\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                         YOUR TASK                               â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                                â”‚\n                                â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  DECOMPOSITION         strategy selection, subtask creation     â”‚\nâ”‚                        (queries CASS, semantic memory)          â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                                â”‚\n                                â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  BEADS                 git-backed issues for each subtask       â”‚\nâ”‚                        (atomic epic + subtasks creation)        â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                                â”‚\n                                â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  SWARM MAIL            actor-model coordination (local-first)   â”‚\nâ”‚                        (DurableMailbox, DurableLock, PGlite)    â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                                â”‚\n                                â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  PGLITE                embedded postgres, event-sourced state   â”‚\nâ”‚                        (append-only log, materialized views)    â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                                â”‚\n                                â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  LEARNING              outcomes feed back into decomposition    â”‚\nâ”‚                        (confidence decay, pattern maturity)     â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n### Event Sourcing\n\nAll state is stored as an append-only event log:\n\n```\nEvent Log (PGLite)\nâ”œâ”€ agent_registered      â†’ Agent joins swarm\nâ”œâ”€ message_sent          â†’ Agent-to-agent communication\nâ”œâ”€ file_reserved         â†’ Exclusive file lock acquired\nâ”œâ”€ file_released         â†’ Lock released\nâ”œâ”€ swarm_checkpointed    â†’ Progress snapshot saved\nâ”œâ”€ decomposition_generated â†’ Task broken into subtasks\nâ””â”€ subtask_outcome       â†’ Worker completion result\n\nMaterialized Views (derived from events)\nâ”œâ”€ agents                â†’ Active agents per project\nâ”œâ”€ messages              â†’ Agent inbox/outbox\nâ”œâ”€ file_reservations     â†’ Current file locks\nâ””â”€ eval_records          â†’ Outcome data for learning\n```\n\n**Why event sourcing?**\n\n- **Audit trail** - full history of what happened\n- **Replay** - reconstruct state from events\n- **Debugging** - see exactly what went wrong\n- **Learning** - analyze outcomes over time\n\nSee the [Swarm Mail Architecture](packages/opencode-swarm-plugin/docs/swarm-mail-architecture.md) section above for details on the durable primitives (DurableCursor, DurableDeferred, DurableLock, DurableMailbox) and how they enable exactly-once processing, request/response patterns, and actor coordination.\n\n## Dependencies\n\n| Required                                     | Optional                                                                                      |\n| -------------------------------------------- | --------------------------------------------------------------------------------------------- |\n| [OpenCode](https://opencode.ai)              | [CASS](https://github.com/Dicklesworthstone/coding_agent_session_search) - historical context |\n|                                              | [UBS](https://github.com/Dicklesworthstone/ultimate_bug_scanner) - bug scanning               |\n|                                              | [Ollama](https://ollama.ai) - local embeddings for semantic memory (embedded in plugin)       |\n\n> **Note:** Semantic memory is now embedded in the plugin. Install Ollama for vector search, or it falls back to full-text search.\n\nRun `swarm doctor` to check status.\n\n## CLI\n\n```bash\nswarm setup     # Install and configure\nswarm doctor    # Check dependencies\nswarm init      # Initialize beads in project\nswarm config    # Show config file paths\n```\n\n## Development\n\n```bash\n# Install all workspace dependencies\nbun install\n\n# Build all packages (respects dependency order)\nbun turbo build\n\n# Test all packages\nbun turbo test\n\n# Typecheck all packages\nbun turbo typecheck\n\n# Build/test specific package\nbun turbo build --filter=swarm-mail\nbun turbo test --filter=opencode-swarm-plugin\n\n# Add dependency to specific package\ncd packages/swarm-mail && bun add zod\n```\n\nSee [AGENTS.md](./AGENTS.md) for detailed monorepo guidance.\n\n## Credits\n\n**Inspiration & Core Ideas:**\n\n- [MCP Agent Mail](https://github.com/Dicklesworthstone/mcp_agent_mail) - **THE INSPIRATION** for multi-agent coordination. Swarm Mail is our implementation built on actor-model primitives (DurableMailbox, DurableLock) with local-first PGlite and event sourcing.\n- [Superpowers](https://github.com/obra/superpowers) - verification patterns, Socratic planning, skill architecture\n- [Electric SQL](https://electric-sql.com) - durable streams and event sourcing patterns that power Swarm Mail\n- [Evalite](https://evalite.dev) - outcome-based evaluation framework for learning systems\n\n## License\n\nMIT\n",
  "installCommand": "git clone https://github.com/joelhooks/swarm-tools ~/.claude/skills/swarm-tools",
  "defaultBranch": "main",
  "hasMarketplaceJson": false,
  "skillPath": "README.md"
}