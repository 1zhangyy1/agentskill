{
  "id": "5e903df83730c295",
  "slug": "mcp-code-execution-enhanced",
  "name": "Mcp Code Execution Enhanced",
  "description": "Enhanced MCP code execution. Agent framework-agnostic (optimized for Claude Code). Skills framework (99.6% token reduction), multi-transport, sandboxing",
  "author": "yoloshii",
  "authorAvatar": "https://avatars.githubusercontent.com/u/26873046?v=4",
  "repoUrl": "https://github.com/yoloshii/mcp-code-execution-enhanced",
  "repoFullName": "yoloshii/mcp-code-execution-enhanced",
  "stars": 27,
  "forks": 3,
  "category": "coding",
  "categories": [
    "coding"
  ],
  "tags": [],
  "tier": 2,
  "status": "active",
  "createdAt": "2025-11-20T06:42:13Z",
  "updatedAt": "2025-12-18T19:07:08Z",
  "lastCommitAt": "2025-11-21T11:28:42Z",
  "source": "github-search",
  "collectedAt": "2025-12-19T03:40:26.258Z",
  "authorUrl": "https://github.com/yoloshii",
  "license": "NOASSERTION",
  "readme": "# MCP Code Execution - Enhanced Edition\n\n**99.6% Token Reduction** through CLI-based scripts and progressive tool discovery for Model Context Protocol (MCP) servers.\n\n[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)\n[![Python 3.11+](https://img.shields.io/badge/python-3.11+-blue.svg)](https://www.python.org/downloads/)\n[![Claude Code](https://img.shields.io/badge/Claude_Code-Optimized-5436DA.svg)](https://docs.claude.com/en/docs/claude-code)\n\n> **Note:** This project is optimized for [Claude Code](https://docs.claude.com/en/docs/claude-code) with native Skills support. The core runtime works with any AI agent. Scripts with CLI arguments achieve 99.6% token reduction.\n\n---\n\n## üéØ What This Is\n\nAn **enhanced implementation** of Anthropic's [Code Execution with MCP](https://www.anthropic.com/engineering/code-execution-with-mcp) pattern, **optimized for Claude Code**, combining the best ideas from the MCP community and adding significant improvements:\n\n- **Scripts with CLI Args**: Reusable Python workflows with command-line parameters (99.6% token reduction)\n- **Multi-Transport**: Full support for stdio, SSE, and HTTP MCP servers\n- **Container Sandboxing**: Optional rootless isolation with security controls\n- **Type Safety**: Pydantic models throughout with full validation\n- **Production-Ready**: 129 passing tests, comprehensive error handling\n\n### ü§ñ Claude Code Integration\n\n**Native Skills Support:** This project includes proper [Claude Code Skills](https://docs.claude.com/en/docs/agents-and-tools/agent-skills) integration:\n\n- **`.claude/skills/`** - Skills in Claude Code's native format (SKILL.md + workflow.py)\n- **Auto-discovery** - Claude Code automatically finds and validates Skills\n- **2 Generic Examples** - simple-fetch, multi-tool-pipeline (templates for custom workflows)\n- **Format Compliant** - YAML frontmatter, validation rules, progressive disclosure\n\n**Dual-layer architecture:**\n- **Layer 1**: Claude Code Skills (`.claude/skills/`) - Native discovery and format\n- **Layer 2**: Scripts (`./scripts/`) - CLI-based Python workflows with argparse\n\n**Token efficiency:**\n- Core runtime: 98.7% reduction (Anthropic's filesystem pattern)\n- Scripts with CLI args: 99.6% reduction (no file editing needed)\n\n**Note:** Scripts work with any AI agent. Claude Code Skills provide native auto-discovery for Claude Code users.\n\n---\n\n## üôè Acknowledgments\n\nThis project builds upon and merges ideas from:\n\n1. **[ipdelete/mcp-code-execution](https://github.com/ipdelete/mcp-code-execution)** - Original implementation of Anthropic's PRIMARY pattern\n   - Filesystem-based progressive disclosure\n   - Type-safe Pydantic wrappers\n   - Schema discovery system\n   - Lazy server connections\n\n2. **[elusznik/mcp-server-code-execution-mode](https://github.com/elusznik/mcp-server-code-execution-mode)** - Production security patterns\n   - Container sandboxing architecture\n   - Comprehensive security controls\n   - Production deployment patterns\n\n**Our contribution:** Merged the best of both, added CLI-based scripts pattern, implemented multi-transport support, and refined the architecture for maximum efficiency.\n\n---\n\n## ‚ú® Key Enhancements\n\n### 1. Claude Code Skills Integration (NEW)\n\n**Native Skills format** in `.claude/skills/` directory:\n\n```\n.claude/skills/\n‚îú‚îÄ‚îÄ simple-fetch/\n‚îÇ   ‚îú‚îÄ‚îÄ SKILL.md        # YAML frontmatter + markdown instructions\n‚îÇ   ‚îî‚îÄ‚îÄ workflow.py     # ‚Üí symlink to ../../scripts/simple_fetch.py\n‚îî‚îÄ‚îÄ multi-tool-pipeline/\n    ‚îú‚îÄ‚îÄ SKILL.md        # Multi-tool orchestration example\n    ‚îî‚îÄ‚îÄ workflow.py     # ‚Üí symlink to ../../scripts/multi_tool_pipeline.py\n```\n\n**How it works:**\n1. Claude Code auto-discovers Skills in `.claude/skills/`\n2. Reads SKILL.md (follows Claude Code's format spec)\n3. Executes workflow.py (which is a script) with CLI arguments\n4. Returns results\n\n**Benefits:**\n- ‚úÖ Native Claude Code discovery\n- ‚úÖ Standard SKILL.md format (YAML + markdown)\n- ‚úÖ Validation compliant (name, description rules)\n- ‚úÖ Progressive disclosure compatible\n- ‚úÖ Generic examples as templates\n\n**Documentation:** See `.claude/skills/README.md` for details\n\n### 2. Scripts with CLI Arguments (99.6% Token Reduction)\n\n**CLI-based Python workflows** that agents execute with parameters:\n\n```bash\n# Simple example (generic template)\nuv run python -m runtime.harness scripts/simple_fetch.py \\\n    --url \"https://example.com\"\n\n# Pipeline example (generic template)\nuv run python -m runtime.harness scripts/multi_tool_pipeline.py \\\n    --repo-path \".\" \\\n    --max-commits 5\n```\n\n**Benefits over writing scripts from scratch:**\n- **18x better tokens**: 110 vs 2,000\n- **24x faster**: 5 seconds vs 2 minutes\n- **Immutable templates**: No file editing\n- **Reusable workflows**: Same logic, different parameters\n\n**What's included:**\n- 2 generic template scripts (simple_fetch.py, multi_tool_pipeline.py)\n- Complete pattern documentation\n\n### 2. Multi-Transport Support (NEW)\n\nFull support for all MCP transport types:\n\n```json\n{\n  \"mcpServers\": {\n    \"local-tool\": {\n      \"type\": \"stdio\",\n      \"command\": \"uvx\",\n      \"args\": [\"mcp-server-git\"]\n    },\n    \"jina\": {\n      \"type\": \"sse\",\n      \"url\": \"https://mcp.jina.ai/sse\",\n      \"headers\": {\"Authorization\": \"Bearer YOUR_KEY\"}\n    },\n    \"exa\": {\n      \"type\": \"http\",\n      \"url\": \"https://mcp.exa.ai/mcp\",\n      \"headers\": {\"x-api-key\": \"YOUR_KEY\"}\n    }\n  }\n}\n```\n\n### 3. Container Sandboxing (Enhanced)\n\nOptional rootless container execution with comprehensive security:\n\n```bash\n# Sandbox mode with security controls\nuv run python -m runtime.harness workspace/script.py --sandbox\n```\n\n**Security features:**\n- Rootless execution (UID 65534:65534)\n- Network isolation (--network none)\n- Read-only root filesystem\n- Memory/CPU/PID limits\n- Capability dropping (--cap-drop ALL)\n- Timeout enforcement\n\n---\n\n## üöÄ Installation\n\n### System Requirements\n\n- **Python 3.11 or 3.12** (3.14 not recommended due to anyio compatibility issues)\n- **[uv](https://github.com/astral-sh/uv)** package manager (v0.5.0+)\n- **[Claude Code](https://docs.claude.com/en/docs/claude-code)** (optional, for Skills auto-discovery)\n- **Git** (for cloning repository)\n- **Docker or Podman** (optional, for sandbox mode)\n\n### Step 1: Install uv\n\nIf you don't have uv installed:\n\n```bash\n# macOS/Linux\ncurl -LsSf https://astral.sh/uv/install.sh | sh\n\n# Windows (PowerShell)\npowershell -ExecutionPolicy ByPass -c \"irm https://astral.sh/uv/install.ps1 | iex\"\n\n# Verify installation\nuv --version\n```\n\n### Step 2: Clone and Install\n\n```bash\n# Clone repository\ngit clone https://github.com/yourusername/mcp-code-execution-enhanced.git\ncd mcp-code-execution-enhanced\n\n# Install dependencies (creates .venv automatically)\nuv sync\n\n# Verify installation\nuv run python -c \"from runtime.mcp_client import get_mcp_client_manager; print('‚úì Installation successful')\"\n```\n\n### Step 3: Create MCP Configuration\n\n> **Important for Claude Code Users:** This project uses its own `mcp_config.json` for MCP server configuration, **separate** from Claude Code's global configuration (`~/.claude.json`). To avoid conflicts, use different servers in each configuration or disable overlapping servers in `~/.claude.json` while using this project.\n\n**Create `mcp_config.json` from the example:**\n\n```bash\n# Copy example config (includes git + fetch for examples)\ncp mcp_config.example.json mcp_config.json\n```\n\n**This config works out of the box:**\n\n```json\n{\n  \"mcpServers\": {\n    \"git\": {\n      \"type\": \"stdio\",\n      \"command\": \"uvx\",\n      \"args\": [\"mcp-server-git\", \"--repository\", \".\"]\n    },\n    \"fetch\": {\n      \"type\": \"stdio\",\n      \"command\": \"uvx\",\n      \"args\": [\"mcp-server-fetch\"]\n    }\n  },\n  \"sandbox\": {\n    \"enabled\": false\n  }\n}\n```\n\n**To add more servers:** Edit `mcp_config.json` and add your own MCP servers. See `docs/TRANSPORTS.md` for examples of stdio, SSE, and HTTP transports.\n\n### Step 4: Generate Tool Wrappers\n\n```bash\n# Auto-generate typed Python wrappers from your MCP servers\nuv run mcp-generate\n\n# This creates ./servers/<server_name>/<tool>.py files\n# Example: servers/git/git_log.py, servers/fetch/fetch.py\n```\n\n### Step 5: Test the Installation\n\n```bash\n# Test with a simple script\nuv run python -m runtime.harness scripts/simple_fetch.py --url \"https://example.com\"\n\n# If you configured a git server, test the pipeline\nuv run python -m runtime.harness scripts/multi_tool_pipeline.py --repo-path \".\" --max-commits 5\n```\n\n### Step 6 (Optional): Setup Sandbox Mode\n\nIf you want to use container sandboxing:\n\n```bash\n# Install Podman (recommended, rootless)\nsudo apt-get install -y podman  # Ubuntu/Debian\nbrew install podman             # macOS\n\n# OR install Docker\ncurl -fsSL https://get.docker.com | sh\n\n# Verify\npodman --version  # or docker --version\n\n# Test sandbox mode\nuv run python -m runtime.harness scripts/simple_fetch.py --url \"https://example.com\" --sandbox\n```\n\n### Step 7 (Optional): Claude Code Skills Setup\n\nIf using Claude Code, the Skills are already configured in `.claude/skills/` and will be auto-discovered. No additional setup needed!\n\n**To use:**\n- Claude Code will automatically find Skills in `.claude/skills/`\n- Just ask Claude to use them naturally\n- Example: \"Fetch https://example.com\" ‚Üí Claude discovers and uses simple-fetch Skill\n\n---\n\n## üìñ How It Works\n\n### PREFERRED: Scripts with CLI Args (99.6% reduction)\n\nFor multi-step workflows (research, data processing, synthesis):\n\n1. **Discover scripts**: `ls ./scripts/` ‚Üí see available script templates\n2. **Read documentation**: `cat ./scripts/simple_fetch.py` ‚Üí see CLI args and pattern\n3. **Execute with parameters**:\n   ```bash\n   uv run python -m runtime.harness scripts/simple_fetch.py \\\n       --url \"https://example.com\"\n   ```\n\n**Generic template scripts** (`scripts/`):\n- `simple_fetch.py` - Basic single-tool execution pattern\n- `multi_tool_pipeline.py` - Multi-tool chaining pattern\n\n**Note:** These are **templates** - use them as examples to create workflows for your specific MCP servers and use cases.\n\n### ALTERNATIVE: Direct Script Writing (98.7% reduction)\n\nFor simple tasks or novel workflows:\n\n1. **Explore tools**: `ls ./servers/` ‚Üí discover available MCP tools\n2. **Write script**: Create Python script using tool imports\n3. **Execute**: `uv run python -m runtime.harness workspace/script.py`\n\n**Example script:**\n```python\nimport asyncio\nfrom runtime.mcp_client import call_mcp_tool\n\nasync def main():\n    result = await call_mcp_tool(\n        \"git__git_log\",\n        {\"repo_path\": \".\", \"max_count\": 10}\n    )\n    print(f\"Fetched {len(result)} commits\")\n    return result\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n```\n\n---\n\n## üèóÔ∏è Architecture\n\n### Progressive Disclosure Pattern\n\n**Traditional Approach** (High Token Usage):\n```\nAgent ‚Üí MCP Server ‚Üí [Full Tool Schemas 27,300 tokens] ‚Üí Agent\n```\n\n**Scripts with CLI Args** (99.6% Reduction - PREFERRED):\n```\nAgent ‚Üí Discovers scripts ‚Üí Reads script docs ‚Üí Executes with CLI args\nScript ‚Üí Multi-server orchestration ‚Üí Returns results\nTokens: ~110 (script discovery + documentation)\nTime: ~5 seconds\n```\n\n**Script Writing** (98.7% Reduction - ALTERNATIVE):\n```\nAgent ‚Üí Discovers tools ‚Üí Writes script\nScript ‚Üí MCP Server ‚Üí Returns data\nAgent ‚Üí Processes/summarizes\nTokens: ~2,000 (tool discovery + script writing)\nTime: ~2 minutes\n```\n\n### Key Components\n\n- **`runtime/mcp_client.py`**: Lazy-loading MCP client manager with multi-transport support\n- **`runtime/harness.py`**: Dual-mode script execution (direct/sandbox)\n- **`runtime/generate_wrappers.py`**: Auto-generate typed wrappers from MCP schemas\n- **`runtime/sandbox/`**: Container sandboxing with security controls\n- **`scripts/`**: CLI-based workflow templates with 2 generic examples\n\n---\n\n## üéì Scripts System\n\n### Philosophy\n\n**DON'T:** Write scripts from scratch each time\n**DO:** Use pre-written scripts with CLI arguments\n\n### Creating Custom Scripts\n\n```python\n\"\"\"\nSCRIPT: Your Script Name\n\nDESCRIPTION: What it does\n\nCLI ARGUMENTS:\n    --query    Research query (required)\n    --limit    Max results (default: 10)\n\nUSAGE:\n    uv run python -m runtime.harness scripts/your_script.py \\\n        --query \"your question\" \\\n        --limit 5\n\"\"\"\n\nimport argparse\nimport asyncio\nimport sys\n\ndef parse_args():\n    parser = argparse.ArgumentParser()\n    parser.add_argument(\"--query\", required=True)\n    parser.add_argument(\"--limit\", type=int, default=10)\n\n    # Filter script path from args\n    args_to_parse = [arg for arg in sys.argv[1:] if not arg.endswith(\".py\")]\n    return parser.parse_args(args_to_parse)\n\nasync def main():\n    args = parse_args()\n    # Your workflow logic here\n    return result\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n```\n\nSee `scripts/README.md` for complete documentation.\n\n---\n\n## üîå Multi-Transport Support\n\n### stdio (Subprocess-based)\n```json\n{\n  \"type\": \"stdio\",\n  \"command\": \"uvx\",\n  \"args\": [\"mcp-server-name\"],\n  \"env\": {\"API_KEY\": \"your-key\"}\n}\n```\n\n### SSE (Server-Sent Events)\n```json\n{\n  \"type\": \"sse\",\n  \"url\": \"https://mcp.example.com/sse\",\n  \"headers\": {\"Authorization\": \"Bearer YOUR_KEY\"}\n}\n```\n\n### HTTP (Streamable HTTP)\n```json\n{\n  \"type\": \"http\",\n  \"url\": \"https://mcp.example.com/mcp\",\n  \"headers\": {\"x-api-key\": \"YOUR_KEY\"}\n}\n```\n\nSee `docs/TRANSPORTS.md` for detailed information.\n\n---\n\n## üîê Sandbox Mode\n\n### Configuration\n\n```json\n{\n  \"sandbox\": {\n    \"enabled\": true,\n    \"runtime\": \"auto\",\n    \"image\": \"python:3.11-slim\",\n    \"memory_limit\": \"512m\",\n    \"timeout\": 30\n  }\n}\n```\n\n### Security Controls\n\n- **Rootless execution**: UID 65534:65534 (nobody)\n- **Network isolation**: `--network none`\n- **Filesystem**: Read-only root, writable tmpfs\n- **Resource limits**: Memory, CPU, PID constraints\n- **Capabilities**: All dropped (`--cap-drop ALL`)\n- **Security**: `no-new-privileges`, SELinux labels\n\nSee `SECURITY.md` for complete security documentation.\n\n---\n\n## üß™ Testing\n\n```bash\n# Run all tests (129 total)\nuv run pytest\n\n# Unit tests only\nuv run pytest tests/unit/\n\n# Integration tests (requires Docker/Podman for sandbox tests)\nuv run pytest tests/integration/\n\n# With coverage\nuv run pytest --cov=src/runtime\n```\n\n---\n\n## üìö Documentation\n\n- **`README.md`** (this file) - Overview and quick start\n- **`CLAUDE.md`** - Quick reference for Claude Code\n- **`AGENTS.md.template`** - Template for adapting to other AI frameworks\n- **`scripts/README.md`** - Scripts system guide\n- **`scripts/SKILLS.md`** - Complete scripts documentation\n- **`docs/USAGE.md`** - Comprehensive user guide\n- **`docs/ARCHITECTURE.md`** - Technical architecture\n- **`docs/CONFIGURATION.md`** - MCP server configuration management (Claude Code vs project)\n- **`docs/TRANSPORTS.md`** - Transport-specific details\n- **`SECURITY.md`** - Security architecture and best practices\n\n---\n\n## üõ†Ô∏è Development\n\n### Code Quality\n\n```bash\n# Type checking\nuv run mypy src/\n\n# Formatting\nuv run black src/ tests/\n\n# Linting\nuv run ruff check src/ tests/\n```\n\n### Project Scripts\n\n```bash\n# Generate wrappers from tool definitions\nuv run mcp-generate\n\n# (Optional) Generate discovery config with LLM parameter generation\nuv run mcp-generate-discovery\n\n# (Optional) Execute safe tools and infer schemas\nuv run mcp-discover\n\n# Execute a script with MCP tools available\nuv run mcp-exec workspace/script.py\n\n# Execute in sandbox mode\nuv run mcp-exec workspace/script.py --sandbox\n```\n\n---\n\n## üìä Efficiency Comparison\n\n| Approach | Tokens | Time | Use Case |\n|----------|--------|------|----------|\n| **Traditional** | 27,300 | N/A | All tool schemas loaded upfront |\n| **Scripts with CLI Args** | 110 | 5 sec | Multi-step workflows (PREFERRED) |\n| **Script Writing** | 2,000 | 2 min | Novel workflows (ALTERNATIVE) |\n\n**Scripts with CLI args achieve 99.6% reduction** - exceeding Anthropic's 98.7% target!\n\n---\n\n## üé® What Makes This Enhanced\n\n### Beyond Original Projects\n\n**From ipdelete/mcp-code-execution:**\n- ‚úÖ Filesystem-based progressive disclosure\n- ‚úÖ Type-safe Pydantic wrappers\n- ‚úÖ Lazy server connections\n- ‚úÖ Schema discovery system\n\n**From elusznik/mcp-server-code-execution-mode:**\n- ‚úÖ Container sandboxing architecture\n- ‚úÖ Security controls and policies\n- ‚úÖ Production deployment patterns\n\n**Enhanced in this project:**\n- ‚≠ê **CLI-based scripts**: CLI-based immutable templates (99.6% reduction)\n- ‚≠ê **Multi-transport**: stdio + SSE + HTTP support (100% server coverage)\n- ‚≠ê **Dual-mode execution**: Direct (fast) + Sandbox (secure)\n- ‚≠ê **Python 3.11 stable**: Avoiding 3.14 anyio compatibility issues\n- ‚≠ê **Comprehensive testing**: 129 tests covering all features\n- ‚≠ê **Enhanced documentation**: Complete guides for all features\n\n### Architecture Innovations\n\n**Scripts with CLI Arguments:**\n- Scripts are **immutable templates** executed with CLI arguments\n- No file editing required (parameters via `--query`, `--num-urls`, etc.)\n- Reusable across different queries and contexts\n- Pre-tested and documented workflows\n\n**Multi-Transport:**\n- Single codebase supports all transport types\n- Automatic transport detection\n- Unified configuration format\n- Seamless server connections\n\n**Dual-Mode Execution:**\n- Direct mode: Fast, full access (development)\n- Sandbox mode: Secure, isolated (production)\n- Same code, different security postures\n- Runtime selection via flag or config\n\n---\n\n## üîß Configuration Reference\n\n### Minimal Configuration\n\n```json\n{\n  \"mcpServers\": {\n    \"git\": {\n      \"command\": \"uvx\",\n      \"args\": [\"mcp-server-git\", \"--repository\", \".\"]\n    }\n  }\n}\n```\n\n### Complete Configuration\n\n```json\n{\n  \"mcpServers\": {\n    \"local-stdio\": {\n      \"type\": \"stdio\",\n      \"command\": \"uvx\",\n      \"args\": [\"mcp-server-name\"],\n      \"env\": {\"API_KEY\": \"key\"},\n      \"disabled\": false\n    },\n    \"remote-sse\": {\n      \"type\": \"sse\",\n      \"url\": \"https://mcp.example.com/sse\",\n      \"headers\": {\"Authorization\": \"Bearer KEY\"},\n      \"disabled\": false\n    },\n    \"remote-http\": {\n      \"type\": \"http\",\n      \"url\": \"https://mcp.example.com/mcp\",\n      \"headers\": {\"x-api-key\": \"KEY\"},\n      \"disabled\": false\n    }\n  },\n  \"sandbox\": {\n    \"enabled\": false,\n    \"runtime\": \"auto\",\n    \"image\": \"python:3.11-slim\",\n    \"memory_limit\": \"512m\",\n    \"cpu_limit\": \"1.0\",\n    \"timeout\": 30,\n    \"max_timeout\": 120\n  }\n}\n```\n\n---\n\n## üì¶ Features\n\n### Core Features\n- ü¶• **Lazy Loading**: Servers connect only when tools are called\n- üîí **Type Safety**: Pydantic models for all tool inputs/outputs\n- üîÑ **Defensive Coding**: Handles variable MCP response structures\n- üì¶ **Auto-generated Wrappers**: Typed Python functions from MCP schemas\n- üõ†Ô∏è **Field Normalization**: Handles inconsistent API casing\n\n### Enhanced Features\n- üéØ **Scripts Pattern**: Pattern for CLI-based reusable workflows\n- üîå **Multi-Transport**: stdio, SSE, and HTTP support\n- üîê **Container Sandboxing**: Optional rootless isolation\n- üß™ **Comprehensive Testing**: 129 tests with full coverage\n- üìñ **Complete Documentation**: Guides for every feature\n\n---\n\n## üéì Examples\n\nSee the `examples/` directory for:\n- `example_progressive_disclosure.py` - Classic token reduction pattern\n- `example_tool_chaining.py` - LLM orchestration pattern\n- `example_sandbox_usage.py` - Container sandboxing demo\n- `example_sandbox_simple.py` - Basic sandbox usage\n\nSee the `scripts/` directory for production-ready workflows.\n\n---\n\n## üêõ Troubleshooting\n\n### Common Issues\n\n**\"MCP server not configured\"**\n- Check `mcp_config.json` server names match your calls\n\n**\"Connection closed\"**\n- Verify server command: `which <command>`\n- Check server logs for startup errors\n\n**\"Module not found\"**\n- Run `uv run mcp-generate` to regenerate wrappers\n- Ensure `src/` is in PYTHONPATH (harness handles this)\n\n**Import errors in skills**\n- Skills must be run via harness (sets PYTHONPATH)\n- Don't run skills directly: `python scripts/script.py` ‚ùå\n- Correct: `uv run python -m runtime.harness scripts/script.py` ‚úÖ\n\n### Python Version Issues\n\n**Python 3.14 compatibility:**\n- Not recommended due to anyio <4.9.0 breaking changes\n- Use Python 3.11 or 3.12 for stability\n- See issue tracker for updates\n\n---\n\n## ü§ù Contributing\n\nWe welcome contributions! Areas of interest:\n\n- **New skills**: Add more workflow templates\n- **MCP server support**: Test with different servers\n- **Documentation**: Improve guides and examples\n- **Testing**: Expand test coverage\n- **Performance**: Optimize token usage further\n\n### Development Setup\n\n```bash\n# Install with dev dependencies\nuv sync --all-extras\n\n# Run quality checks\nuv run black src/ tests/\nuv run mypy src/\nuv run ruff check src/ tests/\nuv run pytest\n```\n\n---\n\n## üìÑ License\n\nMIT License - see LICENSE file for details\n\n---\n\n## üîó References\n\n### Original Projects\n- [ipdelete/mcp-code-execution](https://github.com/ipdelete/mcp-code-execution) - Anthropic's PRIMARY pattern\n- [elusznik/mcp-server-code-execution-mode](https://github.com/elusznik/mcp-server-code-execution-mode) - Production security\n\n### MCP Resources\n- [Model Context Protocol](https://modelcontextprotocol.io/)\n- [Anthropic: Code Execution with MCP](https://www.anthropic.com/engineering/code-execution-with-mcp)\n- [MCP Python SDK](https://github.com/modelcontextprotocol/python-sdk)\n- [MCP Servers List](https://github.com/modelcontextprotocol/servers)\n\n### Python Resources\n- [Pydantic Documentation](https://docs.pydantic.dev/)\n- [uv Package Manager](https://github.com/astral-sh/uv)\n\n---\n\n## üåü Features Comparison\n\n| Feature | Original (ipdelete) | Bridge (elusznik) | Enhanced (this) |\n|---------|---------------------|-------------------|-----------------|\n| **Progressive Disclosure** | ‚úÖ PRIMARY | ‚ö†Ô∏è ALTERNATIVE | ‚úÖ PRIMARY |\n| **Token Reduction** | 98.7% | ~95% | **99.6%** |\n| **Type Safety** | ‚úÖ Pydantic | ‚ö†Ô∏è Basic | ‚úÖ Enhanced |\n| **Sandboxing** | ‚ùå None | ‚úÖ Required | ‚úÖ Optional |\n| **Multi-Transport** | ‚ùå stdio only | ‚ùå stdio only | ‚úÖ stdio/SSE/HTTP |\n| **Scripts Pattern** | ‚ùå None | ‚ùå None | ‚úÖ Yes + examples |\n| **CLI Execution** | ‚ùå None | ‚ùå None | ‚úÖ Immutable |\n| **Test Coverage** | ‚ö†Ô∏è Partial | ‚ö†Ô∏è Partial | ‚úÖ Comprehensive |\n| **Python 3.11** | ‚úÖ Yes | ‚ö†Ô∏è 3.12+ | ‚úÖ Stable |\n\n---\n\n## üí° Use Cases\n\n### Perfect For\n\n- ‚úÖ AI agents needing to orchestrate multiple MCP tools\n- ‚úÖ Research workflows (web search ‚Üí read ‚Üí synthesize)\n- ‚úÖ Data processing pipelines (fetch ‚Üí transform ‚Üí output)\n- ‚úÖ Code discovery (search ‚Üí analyze ‚Üí recommend)\n- ‚úÖ Production deployments requiring security isolation\n- ‚úÖ Teams needing reproducible research workflows\n\n### Not Ideal For\n\n- ‚ùå Single tool calls (use MCP directly instead)\n- ‚ùå Real-time interactive tools (better suited for direct integration)\n- ‚ùå GUI applications (command-line focused)\n\n---\n\n## üö¶ Getting Started Checklist\n\n- [ ] Install Python 3.11+ and uv\n- [ ] Clone repository\n- [ ] Run `uv sync`\n- [ ] Create `mcp_config.json` with your MCP servers\n- [ ] Run `uv run mcp-generate` to create wrappers\n- [ ] Try a skill: `uv run python -m runtime.harness scripts/simple_fetch.py --url \"https://example.com\"`\n- [ ] Read `AGENTS.md` for operational guide\n- [ ] Explore `scripts/` for available workflows\n- [ ] Review `docs/` for detailed documentation\n\n---\n\n## ‚ùì FAQ\n\n**Q: Why Skills instead of writing scripts?**\nA: Skills achieve 99.6% token reduction vs 98.7% for scripts, and execute 24x faster (5 sec vs 2 min). They're pre-tested, documented, and immutable.\n\n**Q: Can I use this without Claude Code?**\nA: Yes, but with limitations. The core runtime (script writing, 98.7% reduction) works with any AI agent. The Scripts with CLI args (99.6% reduction) work for Claude Code's operational intelligence.\n\n**Q: Can I still write custom scripts?**\nA: Yes! Scripts with CLI args are PREFERRED for common workflows (with Claude Code), but custom scripts are fully supported for novel use cases and other AI agents.\n\n**Q: What's the difference from the original projects?**\nA: We merged the best of both (progressive disclosure + security), added CLI-based scripts pattern, multi-transport support, and refined the architecture.\n\n**Q: Why Python 3.11 instead of 3.14?**\nA: anyio <4.9.0 has compatibility issues with Python 3.14's asyncio changes. 3.11 is stable and well-tested.\n\n**Q: Is sandboxing required?**\nA: No, it's optional. Use direct mode for development (fast), sandbox mode for production (secure).\n\n**Q: How do I add my own MCP servers?**\nA: Add them to `mcp_config.json`, run `uv run mcp-generate`, and they're ready to use!\n\n---\n\n## üéØ Next Steps\n\n1. **Explore scripts**: `ls scripts/` and `cat scripts/simple_fetch.py`\n2. **Try examples**: Run the example skills or create your own\n3. **Read CLAUDE.md**: Quick operational guide (for Claude Code users)\n4. **Review docs/**: Deep dive into architecture\n5. **Create custom skill**: Follow the template for your use case\n\n",
  "installCommand": "git clone https://github.com/yoloshii/mcp-code-execution-enhanced ~/.claude/skills/mcp-code-execution-enhanced",
  "defaultBranch": "main",
  "hasMarketplaceJson": false,
  "skillPath": "README.md"
}