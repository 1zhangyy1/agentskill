{
  "id": "281158c212a2cb5f",
  "slug": "vigil",
  "name": "Vigil",
  "description": "A practical technology expert agent framework for Claude Code. Build specialized AI assistants with domain knowledge, documentation access, and state recovery protocols.",
  "author": "tbartel74",
  "authorAvatar": "https://avatars.githubusercontent.com/u/205202250?v=4",
  "repoUrl": "https://github.com/tbartel74/Vigil-Code",
  "repoFullName": "tbartel74/Vigil-Code",
  "stars": 5,
  "forks": 2,
  "category": "testing",
  "categories": [
    "testing"
  ],
  "tags": [],
  "tier": 3,
  "status": "active",
  "createdAt": "2025-11-12T18:35:08Z",
  "updatedAt": "2025-12-21T18:51:55Z",
  "lastCommitAt": "2025-12-09T20:33:40Z",
  "source": "github-search",
  "collectedAt": "2025-12-23T03:45:02.212Z",
  "authorUrl": "https://github.com/tbartel74",
  "license": "MIT",
  "readme": "# Vigil-Code: Technology Expert Agent System v3.2\n\n**A practical technology expert agent framework for Claude Code. Build specialized AI assistants with domain knowledge, documentation access, and state recovery protocols.**\n\n[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)\n[![Claude Code](https://img.shields.io/badge/Claude-Code-blue.svg)](https://claude.ai/code)\n[![Experts: 17](https://img.shields.io/badge/Experts-17-green.svg)](#technology-experts-17)\n[![Skills: 22](https://img.shields.io/badge/Skills-22-orange.svg)](#skills-domain-context)\n[![Version: 3.2](https://img.shields.io/badge/Version-3.2-brightgreen.svg)]()\n\n> **Documentation available in:** [Polski (Polish)](docs/README.pl.md)\n\n---\n\n## Table of Contents\n\n1. [What It Is and Why Use It](#what-it-is-and-why-use-it)\n2. [Quick Start](#quick-start)\n3. [System Architecture](#system-architecture)\n4. [How Expert Routing Works](#how-expert-routing-works)\n5. [OODA Protocol](#ooda-protocol)\n6. [Expert Anatomy](#expert-anatomy)\n7. [Creating Your Own Expert](#creating-your-own-expert)\n8. [Slash Commands](#slash-commands)\n9. [Skills (Domain Context)](#skills-domain-context)\n10. [Workflow State and Checkpoints](#workflow-state-and-checkpoints)\n11. [Error Handling](#error-handling)\n12. [Token Optimization](#token-optimization)\n13. [Adapting to Your Project](#adapting-to-your-project)\n14. [Usage Examples](#usage-examples)\n15. [Troubleshooting](#troubleshooting)\n\n---\n\n## What It Is and Why Use It\n\n### The Problem\n\nClaude Code is a powerful tool, but:\n- It doesn't know technology specifics (n8n, Presidio, ClickHouse)\n- It doesn't remember context between sessions\n- It lacks structure for complex, multi-step tasks\n- It may guess instead of checking documentation\n\n### The Solution\n\nVigil-Code introduces a system of **technology experts** - specialized agents with:\n\n1. **Domain Knowledge** - each expert knows their technology (React, Docker, Vitest...)\n2. **Documentation Access** - 3-tier knowledge model (memory â†’ docs â†’ community)\n3. **Decision Protocol** - OODA loop ensures deliberate actions\n4. **Workflow State** - `progress.json` tracks multi-step task progress\n5. **Error Recovery** - checkpoints enable rollback to previous states\n\n### Philosophy\n\n```\nOLD MODEL: Agent knows project specifics (hardcoded knowledge)\nNEW MODEL: Agent is a technology expert + reads project context from files\n```\n\n**Benefits:**\n- **Reusability** - same experts work across any project\n- **Maintainability** - update technology knowledge, not project-specific code\n- **Specialization** - each expert is deeply specialized\n- **Scalability** - add new experts in minutes\n\n---\n\n## Quick Start\n\n### Installation\n\n```bash\n# Clone the repository\ngit clone https://github.com/tbartel74/vigil-code.git\ncd vigil-code\n\n# Copy to your project\ncp -r .claude /path/to/your/project/\n\n# Optional: copy CLAUDE.md as an example of project instructions\ncp CLAUDE.md /path/to/your/project/\n```\n\n### Post-Installation Structure\n\n```\nyour-project/\nâ”œâ”€â”€ .claude/\nâ”‚   â”œâ”€â”€ agents/           # 17 technology experts\nâ”‚   â”œâ”€â”€ commands/         # 23 slash commands\nâ”‚   â”œâ”€â”€ skills/           # 22 domain contexts\nâ”‚   â”œâ”€â”€ core/             # Protocols and schemas\nâ”‚   â”‚   â”œâ”€â”€ protocols.md  # OODA, checkpoints, errors\nâ”‚   â”‚   â””â”€â”€ tool-schema.md # Tool categories\nâ”‚   â”œâ”€â”€ state/            # Runtime state (gitignore)\nâ”‚   â””â”€â”€ README.md         # System documentation\nâ”œâ”€â”€ CLAUDE.md             # Your project instructions\nâ””â”€â”€ [rest of project]\n```\n\n### First Use\n\n```\n/expert How do I create a custom recognizer in Presidio?\n```\n\nClaude Code:\n1. Parses the query\n2. Matches triggers â†’ `presidio-expert`\n3. Loads knowledge from `.claude/agents/presidio-expert/AGENT.md`\n4. Responds with documentation reference\n\n---\n\n## System Architecture\n\n```\n                         TECHNOLOGY EXPERTS\n                    (each with its own AGENT.md)\n\n    +-----------+  +-----------+  +-----------+  +-----------+\n    | n8n       |  | React     |  | Express   |  | Docker    |\n    | (sonnet)  |  | (sonnet)  |  | (sonnet)  |  | (sonnet)  |\n    +-----+-----+  +-----+-----+  +-----+-----+  +-----+-----+\n          |              |              |              |\n          +--------------+--------------+--------------+\n                                |\n                                v\n                  +---------------------------+\n                  |    Orchestrator (opus)    |\n                  |   - routes tasks          |\n                  |   - plans workflows       |\n                  |   - coordinates experts   |\n                  +---------------------------+\n                                |\n                                v\n                  +---------------------------+\n                  |     Project Context       |\n                  |  - CLAUDE.md (instructions)|\n                  |  - progress.json (state)  |\n                  |  - protocols.md           |\n                  +---------------------------+\n```\n\n### Components\n\n| Component | Location | Description |\n|-----------|----------|-------------|\n| **Agents** | `.claude/agents/*/AGENT.md` | Experts with technology knowledge |\n| **Commands** | `.claude/commands/*.md` | Slash commands (`/expert`, `/vg`) |\n| **Skills** | `.claude/skills/*/SKILL.md` | Project-specific domain context |\n| **Protocols** | `.claude/core/protocols.md` | OODA, checkpoints, error handling |\n| **Tool Schema** | `.claude/core/tool-schema.md` | Tool categories (Core/Extended/Deferred) |\n| **State** | `.claude/state/progress.json` | Current workflow state |\n\n---\n\n## Technology Experts (17)\n\nEach expert is a `.claude/agents/[name]/AGENT.md` file with YAML frontmatter + Markdown content.\n\n| Expert | Model | Primary Triggers | Specialization |\n|--------|-------|------------------|----------------|\n| `orchestrator` | **opus** | multi-step, coordinate | Routing, planning, coordination |\n| `n8n-expert` | sonnet | n8n, workflow, Code node | Workflows, webhooks, automation |\n| `react-expert` | sonnet | react, component, hook | Components, state, hooks |\n| `express-expert` | sonnet | express, API, middleware | REST APIs, auth, routing |\n| `vitest-expert` | sonnet | test, vitest, TDD | Testing, fixtures, mocking |\n| `clickhouse-expert` | sonnet | clickhouse, analytics, SQL | Analytics DB, schema |\n| `docker-expert` | sonnet | docker, container, compose | Containers, networking |\n| `presidio-expert` | sonnet | presidio, PII, entity | PII detection, NLP |\n| `security-expert` | sonnet | security, OWASP, auth | Vulnerabilities, audits |\n| `git-expert` | sonnet | git, commit, branch | Version control, PRs |\n| `python-expert` | sonnet | python, flask, fastapi | Python APIs |\n| `tailwind-expert` | sonnet | tailwind, CSS, styling | Utility CSS, responsive |\n| `kubernetes-expert` | sonnet | kubernetes, k8s, kubectl, pod | Cluster ops, deployments, RBAC |\n| `helm-expert` | sonnet | helm, chart, values.yaml | Charts, releases, templating |\n| `nats-expert` | sonnet | nats, jetstream, stream | Messaging, queues, pub/sub |\n| `redis-expert` | sonnet | redis, cache, rate limit | Caching, sessions, rate limiting |\n| `code-audit-expert` | **opus** | audit, code quality, review | Code auditing, quality assessment |\n\n---\n\n## Code Audit System\n\nRun comprehensive code audits using the `/audit-code` command:\n\n```bash\n/audit-code                      # Full audit (10 categories)\n/audit-code --quick              # Security + Tests + Tech Debt only\n/audit-code --category=security  # Single category deep-dive\n```\n\n### 10 Audit Categories\n\n| Category | Points | Focus |\n|----------|--------|-------|\n| Structure | 10 | Architecture, module design |\n| Readability | 10 | Code quality, naming, style |\n| Testability | 10 | Coverage, test quality |\n| CI/CD | 5 | Pipelines, automation |\n| Security | 10 | OWASP, vulnerabilities |\n| Observability | 5 | Logging, monitoring |\n| Tech Debt | 10 | TODOs, code smells |\n| Documentation | 5 | API docs, README |\n| Performance | 5 | Queries, caching |\n| DDD | 5 | Domain modeling |\n\n### Rating System\n\n- ðŸŸ¢ **OK** - Meets professional standards\n- ðŸŸ¡ **NEEDS_IMPROVEMENT** - Fix this sprint\n- ðŸ”´ **CRITICAL** - Immediate action required\n\n### Output Files\n\n- `.claude/state/audit-report.json` - Machine-readable report\n- `docs/AUDIT_SUMMARY.md` - Human-readable summary\n\n### Philosophy: 5-10 Leverage Points, Not 200 Issues\n\nThe audit system focuses on identifying **high-leverage improvement opportunities** rather than overwhelming you with hundreds of minor issues. Each audit produces a prioritized list of 5-10 actionable recommendations sorted by Impact Ã— Effort.\n\n---\n\n## How Expert Routing Works\n\n### Step 1: Parse the Query\n\n```\nUser: /expert Add health check to Express API\n```\n\n### Step 2: Match Triggers\n\nEach expert has triggers defined in YAML frontmatter:\n\n```yaml\n# .claude/agents/express-expert/AGENT.md\ntriggers:\n  primary:    # +10 points per match\n    - \"express\"\n    - \"api\"\n    - \"middleware\"\n  secondary:  # +5 points per match\n    - \"endpoint\"\n    - \"route\"\n    - \"backend\"\n```\n\n**Scoring:**\n- \"Express\" â†’ +10 (primary)\n- \"API\" â†’ +10 (primary)\n- **Total: 20 points â†’ express-expert**\n\n### Step 3: Choose Strategy\n\n| Strategy | When | Token Budget |\n|----------|------|--------------|\n| **single** | One expert is sufficient | 10K |\n| **sequential** | Experts depend on previous results | 25K |\n| **parallel** | Experts can work independently | 30K |\n\n### Step 4: Invoke Expert\n\n```javascript\nTask(\n  prompt: `You are express-expert, a world-class Express.js expert.\n\n           Read .claude/agents/express-expert/AGENT.md for knowledge base.\n           Read .claude/state/progress.json for workflow context.\n\n           Execute: Add health check endpoint\n\n           Follow OODA:\n           1. OBSERVE: Examine existing routes\n           2. ORIENT: Consider approaches\n           3. DECIDE: Choose action with justification\n           4. ACT: Execute and update progress.json`,\n  subagent_type: \"general-purpose\",\n  model: \"sonnet\"\n)\n```\n\n### Force a Specific Expert\n\nUse square brackets:\n\n```\n/expert [docker] Why is port 5678 not accessible?\n/expert [security] Review this authentication flow\n```\n\n---\n\n## OODA Protocol\n\nEach expert follows the OODA loop before every action:\n\n### OBSERVE\n\n```\n- Read progress.json (workflow state)\n- Examine relevant files\n- Identify what exists vs what's missing\n- Note blockers or dependencies\n```\n\n### ORIENT\n\n```\n- Consider 2+ alternative approaches\n- Assess confidence level (HIGH/MEDIUM/LOW)\n- Identify potential failure modes\n- Select tools to use\n```\n\n### DECIDE\n\n```\n- Choose specific action with justification\n- Define expected outcome\n- Specify success criteria\n- Plan fallback if it fails\n```\n\n### ACT\n\n```\n- Execute chosen tool\n- Capture full output\n- Update progress.json with OODA state\n- Evaluate results\n```\n\n### Example OODA in progress.json\n\n```json\n{\n  \"steps\": [{\n    \"expert\": \"vitest-expert\",\n    \"ooda\": {\n      \"observe\": \"No SQL injection tests in tests/. Checked rules.config.json - no SQL_INJECTION category.\",\n      \"orient\": \"TDD required. Options: 1) Fixture first (recommended), 2) Pattern first (risky). Confidence: HIGH for option 1.\",\n      \"decide\": \"Create fixture in tests/fixtures/malicious/sql-injection.json with UNION SELECT, OR 1=1, DROP TABLE payloads. Success: file with 5+ payloads.\",\n      \"act\": \"Use Write tool to create fixture.\"\n    }\n  }]\n}\n```\n\n### Confidence Levels\n\n| Level | Description | Action |\n|-------|-------------|--------|\n| **HIGH** | Core knowledge, used daily | Respond directly |\n| **MEDIUM** | Know concept, uncertain of details | Check docs first |\n| **LOW** | Unknown or edge case | Research thoroughly |\n\n---\n\n## Expert Anatomy\n\n### YAML Frontmatter Structure\n\n```yaml\n---\n# === IDENTITY ===\nname: express-expert\nversion: \"3.1\"\ndescription: |\n  Express.js and Node.js backend expert. Deep knowledge of REST APIs,\n  middleware, authentication, routing, and security best practices.\n\n# === MODEL CONFIGURATION ===\nmodel: sonnet  # sonnet (fast) | opus (complex tasks)\nthinking: extended  # extended | standard | minimal\n\n# === TOOL CONFIGURATION ===\ntools:\n  core:      # Always loaded (~850 tokens)\n    - Read\n    - Edit\n    - Glob\n    - Grep\n  extended:  # Loaded on demand (~950 tokens)\n    - Write\n    - Bash\n  deferred:  # Loaded on discovery (~1050 tokens)\n    - WebFetch\n    - WebSearch\n\n# === TOOL EXAMPLES ===\ntool-examples:\n  Read:\n    - description: \"Read Express server file\"\n      parameters:\n        file_path: \"services/backend/src/server.ts\"\n      expected: \"Express app with routes, middleware, JWT auth\"\n  Grep:\n    - description: \"Find route definitions\"\n      parameters:\n        pattern: \"app\\\\.(get|post|put|delete)\\\\(\"\n        path: \"services/backend/\"\n        output_mode: \"content\"\n      expected: \"All Express route handlers\"\n\n# === ROUTING ===\ntriggers:\n  primary:    # High confidence (+10 pts)\n    - \"express\"\n    - \"api\"\n    - \"middleware\"\n  secondary:  # Medium confidence (+5 pts)\n    - \"endpoint\"\n    - \"route\"\n    - \"backend\"\n\n# === OUTPUT SCHEMA ===\noutput-schema:\n  type: object\n  required: [status, findings, actions_taken, ooda]\n  properties:\n    status:\n      enum: [success, partial, failed, blocked]\n    ooda:\n      type: object\n---\n```\n\n### Markdown Content Structure\n\n```markdown\n# Expert Name Agent\n\nExpert role description.\n\n## OODA Protocol\n\nInstructions for each OODA phase.\n\n## Core Knowledge (Tier 1)\n\nFundamental knowledge - immediately available.\n[code, patterns, best practices]\n\n## Documentation Sources (Tier 2)\n\n| Source | URL | Usage |\n|--------|-----|-------|\n| Official Docs | https://... | Core concepts |\n\n### When to Fetch Documentation\n\n- [ ] Specific parameter names\n- [ ] Expression syntax\n\n## Community Sources (Tier 3)\n\n| Source | URL | Usage |\n|--------|-----|-------|\n| GitHub Issues | https://... | Known bugs |\n\n## Common Tasks\n\n### Task 1\n```code\nimplementation example\n```\n\n## Response Format\n\n[response template]\n\n## Critical Rules\n\n- Always validate input\n- Never hardcode secrets\n```\n\n---\n\n## Creating Your Own Expert\n\n### Step 1: Create Directory\n\n```bash\nmkdir -p .claude/agents/terraform-expert\n```\n\n### Step 2: Create AGENT.md\n\n```yaml\n---\nname: terraform-expert\nversion: \"3.1\"\ndescription: |\n  Terraform and Infrastructure as Code expert. Deep knowledge of providers,\n  resources, modules, state management, and cloud deployments.\n\nmodel: sonnet\nthinking: extended\n\ntools:\n  core: [Read, Edit, Glob, Grep]\n  extended: [Write, Bash]\n  deferred: [WebFetch, WebSearch]\n\ntool-examples:\n  Bash:\n    - description: \"Initialize Terraform\"\n      parameters:\n        command: \"terraform init\"\n      expected: \"Provider plugins downloaded\"\n    - description: \"Plan infrastructure changes\"\n      parameters:\n        command: \"terraform plan\"\n      expected: \"Execution plan with resources to create/modify/destroy\"\n\ntriggers:\n  primary:\n    - \"terraform\"\n    - \"tf\"\n    - \"infrastructure\"\n    - \"IaC\"\n  secondary:\n    - \"provider\"\n    - \"module\"\n    - \"state\"\n    - \"resource\"\n\noutput-schema:\n  type: object\n  required: [status, findings, actions_taken, ooda]\n---\n\n# Terraform Expert Agent\n\nYou are a world-class Terraform and Infrastructure as Code expert.\n\n## Core Knowledge (Tier 1)\n\n### Resource Definition\n```hcl\nresource \"aws_instance\" \"web\" {\n  ami           = \"ami-0c55b159cbfafe1f0\"\n  instance_type = \"t2.micro\"\n\n  tags = {\n    Name = \"WebServer\"\n  }\n}\n```\n\n### Common Commands\n```bash\nterraform init      # Initialize working directory\nterraform plan      # Preview changes\nterraform apply     # Apply changes\nterraform destroy   # Destroy infrastructure\n```\n\n## Documentation Sources (Tier 2)\n\n| Source | URL |\n|--------|-----|\n| Terraform Docs | https://developer.hashicorp.com/terraform/docs |\n\n## Critical Rules\n\n- Always use remote state in production\n- Never commit .tfstate files to git\n- Use variables for sensitive data\n```\n\n### Step 3: Expert Auto-Registers\n\nThe system reads triggers from frontmatter and routes appropriate queries.\n\n> **Note:** Kubernetes and Helm experts are already included in the system. See `.claude/agents/kubernetes-expert/` and `.claude/agents/helm-expert/` for full implementations.\n\n---\n\n## Slash Commands\n\nSlash commands are shortcuts to common operations. Definitions in `.claude/commands/*.md`.\n\n### Main Commands\n\n| Command | Description | Usage |\n|---------|-------------|-------|\n| `/expert [task]` | Route to expert | `/expert How to use hooks in React?` |\n| `/expert [name] [task]` | Force expert | `/expert [docker] Fix networking` |\n| `/orchestrate [task]` | Multi-expert coordination | `/orchestrate Add feature with tests` |\n| `/vg [agent] [task]` | Universal invocation | `/vg test-automation Run tests` |\n\n### Creating Your Own Command\n\n```bash\n# .claude/commands/deploy-preview.md\n```\n\n```yaml\n---\nname: deploy-preview\ndescription: Deploy preview environment for PR\n---\n\n# Deploy Preview\n\nDeploy preview for current PR.\n\n## Steps\n\n1. Build Docker image from current branch\n2. Deploy to preview namespace\n3. Return preview URL\n```\n\nUsage:\n```\n/deploy-preview\n```\n\n---\n\n## Skills (Domain Context)\n\nSkills are extensions providing project-specific context.\n\n### Expert vs Skill Difference\n\n| Aspect | Expert | Skill |\n|--------|--------|-------|\n| Knowledge | Technology (React, Docker) | Project (Your API, Your structure) |\n| Reusability | Universal | Project-specific |\n| Location | `.claude/agents/` | `.claude/skills/` |\n| Invocation | Automatic (triggers) | Manual (Skill tool) |\n\n### Skill Structure\n\n```yaml\n# .claude/skills/my-api-context/SKILL.md\n---\nname: my-api-context\ndescription: My project API context\nversion: 1.0.0\nallowed-tools: [Read, Glob, Grep]\n---\n\n# My API Context\n\n## Project Structure\n\nsrc/\nâ”œâ”€â”€ controllers/     # Request handlers\nâ”œâ”€â”€ services/        # Business logic\nâ”œâ”€â”€ models/          # Database models\nâ””â”€â”€ middleware/      # Express middleware\n\n## Conventions\n\n- Controllers: `*.controller.ts`\n- Services: `*.service.ts`\n\n## How to Add an Endpoint\n\n1. Create controller\n2. Create service\n3. Add route\n4. Add test\n```\n\n---\n\n## Workflow State and Checkpoints\n\n### progress.json\n\nMulti-step tasks track state in `.claude/state/progress.json`:\n\n```json\n{\n  \"schema_version\": \"3.1\",\n  \"workflow_id\": \"wf-20251202-abc123\",\n  \"created_at\": \"2025-12-02T10:00:00Z\",\n\n  \"task\": {\n    \"original_request\": \"Add SQL injection detection with tests\",\n    \"summary\": \"TDD workflow: test â†’ pattern â†’ verify\",\n    \"complexity\": \"medium\"\n  },\n\n  \"planning\": {\n    \"strategy\": \"sequential\",\n    \"thinking\": \"TDD required. Test first, then implementation.\",\n    \"risks\": [\"Pattern may cause false positives\"]\n  },\n\n  \"classification\": {\n    \"primary_expert\": \"vitest-expert\",\n    \"supporting_experts\": [\"n8n-expert\"],\n    \"execution_order\": [\"vitest-expert\", \"n8n-expert\", \"vitest-expert\"]\n  },\n\n  \"token_budget\": {\n    \"allocated\": 25000,\n    \"used\": 8500,\n    \"remaining\": 16500\n  },\n\n  \"status\": \"in_progress\",\n  \"current_step\": 2,\n  \"total_steps\": 3,\n\n  \"steps\": [\n    {\n      \"id\": 1,\n      \"expert\": \"vitest-expert\",\n      \"action\": \"create_fixture\",\n      \"status\": \"completed\",\n      \"ooda\": {\n        \"observe\": \"No SQL injection tests\",\n        \"orient\": \"TDD: fixture first\",\n        \"decide\": \"Create fixture with 5 payloads. Confidence: HIGH\",\n        \"act\": \"Write fixture\"\n      },\n      \"artifacts\": [\"tests/fixtures/sql-injection.json\"]\n    }\n  ],\n\n  \"checkpoints\": [\n    {\n      \"id\": \"cp-001\",\n      \"step_id\": 1,\n      \"type\": \"step_complete\",\n      \"files_modified\": [\"tests/fixtures/sql-injection.json\"],\n      \"restorable\": true,\n      \"restore_command\": \"git checkout abc123 -- tests/fixtures/sql-injection.json\"\n    }\n  ],\n\n  \"clean_state\": {\n    \"all_tests_pass\": false,\n    \"ready_to_merge\": false\n  }\n}\n```\n\n### Recovery\n\n```bash\n# Restore file from checkpoint\ngit checkout abc123 -- path/to/file.ts\n\n# Full rollback\ngit reset --hard abc123\n```\n\n---\n\n## Error Handling\n\n### Error Taxonomy (19 codes)\n\n#### Recoverable (E0xx) - Retry with backoff\n\n| Code | Error | Strategy |\n|------|-------|----------|\n| E001 | Network timeout | Exponential backoff (5s, 15s, 45s) |\n| E002 | Rate limit | Wait + retry |\n| E003 | File lock | Wait 5s, retry |\n\n#### Soft Errors (E1xx) - Alternative approach\n\n| Code | Error | Alternative |\n|------|-------|-------------|\n| E101 | File not found | Search with Glob |\n| E102 | Pattern not found | Expand search |\n| E103 | WebFetch 404 | Try WebSearch |\n\n#### Hard Errors (E2xx) - Escalate to user\n\n| Code | Error | Action |\n|------|-------|--------|\n| E201 | Permission denied | Halt + report |\n| E202 | Out of tokens | Save state, stop |\n| E203 | Conflicting edits | Require resolution |\n\n#### Validation Errors (E3xx) - Fix and retry\n\n| Code | Error | Action |\n|------|-------|--------|\n| E301 | Test failure | Analyze + fix |\n| E302 | Lint failure | Auto-fix |\n| E303 | Type error | Fix types |\n\n---\n\n## Token Optimization\n\n### Tool Categories\n\n| Category | Tools | Tokens | Loading |\n|----------|-------|--------|---------|\n| **Core** | Read, Edit, Glob, Grep | ~850 | Always |\n| **Extended** | Write, Bash, Task | ~950 | On demand |\n| **Deferred** | WebFetch, WebSearch | ~1050 | Discovery |\n\n### Savings\n\n| Scenario | Traditional | v3.1 | Savings |\n|----------|-------------|------|---------|\n| Simple edit | 2850 | 850 | **70%** |\n| Code + test | 2850 | 1800 | **37%** |\n\n### Batch Operations\n\n```bash\n# BAD: 10 Read calls (~5000 tokens)\n\n# GOOD: 1 Bash call (~800 tokens)\nfor f in $(find src -name \"*.ts\" | head -10); do\n  echo \"=== $f ===\"\n  grep -n \"pattern\" \"$f\" | head -5\ndone\n```\n\n---\n\n## Adapting to Your Project\n\n### Step 1: Copy .claude\n\n```bash\ncp -r vigil-code/.claude /your/project/\n```\n\n### Step 2: Remove Unneeded Experts\n\n```bash\n# If you don't use n8n\nrm -rf .claude/agents/n8n-expert\n```\n\n### Step 3: Add Your Own Experts\n\nFor technologies specific to your project.\n\n### Step 4: Customize Skills\n\n```bash\n# Remove Vigil Guard skills\nrm -rf .claude/skills/vg-*\n\n# Add your own\nmkdir .claude/skills/my-project-context\n```\n\n### Step 5: Create CLAUDE.md\n\n```markdown\n# CLAUDE.md\n\nInstructions for Claude Code in this project.\n\n## Project Structure\n[describe your structure]\n\n## Conventions\n[describe code conventions]\n\n## Important Files\n[list key files]\n```\n\n### Step 6: Update .gitignore\n\n```gitignore\n# Agent state (runtime)\n.claude/state/\n.claude/settings.local.json\n```\n\n---\n\n## Usage Examples\n\n### Technology Question\n\n```\n/expert How to use useCallback in React?\n\nreact-expert (model: sonnet)\nuseCallback memoizes a callback function...\nSource: https://react.dev/reference/react/useCallback\n```\n\n### TDD Implementation\n\n```\n/expert Add email validation with tests\n\nTask: Add email validation with tests\nStrategy: sequential\n\nStep 1/3: vitest-expert\n   - Action: create_test\n   - Completed (1.5s)\n\nStep 2/3: express-expert\n   - Action: create_middleware\n   - Completed (1.2s)\n\nStep 3/3: vitest-expert\n   - Action: run_tests\n   - Result: 5 passed\n\nTask Completed in 4.7s\nClean State: Tests passing\n```\n\n### Parallel Execution\n\n```\n/expert Create API endpoint and React component\n\nStrategy: parallel\n\nexpress-expert (sonnet) -> Completed\nreact-expert (sonnet) -> Completed\n\nArtifacts:\n   - src/routes/users.ts\n   - src/components/UserList.tsx\n```\n\n### Debug with Documentation\n\n```\n/expert [docker] Container can't connect to database\n\ndocker-expert (model: sonnet)\n\nOBSERVE: Checking docker-compose.yml\n\nORIENT: Possible causes:\n1. Containers in different networks\n2. Wrong hostname\n\nFetching docs... (docker networking)\nSource: https://docs.docker.com/network/\n\nSolution:\nUse service name as hostname, not localhost.\n\nStatus: success\n```\n\n---\n\n## Troubleshooting\n\n| Problem | Solution |\n|---------|----------|\n| Wrong expert selected | Use `[expert-name]` in brackets |\n| Expert doesn't know project | Update CLAUDE.md |\n| Workflow hangs | Check `.claude/state/progress.json` |\n| Expert gives outdated info | Ask to \"verify in documentation\" |\n| Too slow | Use specific expert instead of orchestrator |\n| Token limit | Use batch operations |\n\n### Debug Workflow\n\n```bash\n# Check workflow state\ncat .claude/state/progress.json | jq '.status, .current_step'\n\n# Check errors\ncat .claude/state/progress.json | jq '.errors'\n```\n\n### Reset Workflow\n\n```bash\nrm .claude/state/progress.json\n```\n\n---\n\n## Reference Files\n\n| File | Description |\n|------|-------------|\n| [.claude/README.md](.claude/README.md) | Agent system documentation |\n| [.claude/core/protocols.md](.claude/core/protocols.md) | All 13 protocols |\n| [.claude/core/tool-schema.md](.claude/core/tool-schema.md) | Tool categories |\n\n---\n\n## License\n\nMIT License - See [LICENSE](LICENSE) file.\n\nCopyright (c) 2025 Tomasz Bartel\n\n---\n\n**Status:** Production Ready\n**Version:** 3.2.0\n**Last Updated:** 2025-12-09\n",
  "installCommand": "git clone https://github.com/tbartel74/Vigil-Code ~/.claude/skills/vigil",
  "defaultBranch": "main",
  "hasMarketplaceJson": false,
  "skillPath": "README.md"
}