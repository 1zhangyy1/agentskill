{
  "id": "cd832469cdd84039",
  "slug": "brainarr",
  "name": "Brainarr",
  "description": "Local AI Music Discovery for Lidarr - Brainarr is a privacy-focused AI-powered import list plugin for Lidarr that generates intelligent music recommendations using local AI models. It exclusively supp",
  "author": "RicherTunes",
  "authorAvatar": "https://avatars.githubusercontent.com/u/224446315?v=4",
  "repoUrl": "https://github.com/RicherTunes/Brainarr",
  "repoFullName": "RicherTunes/Brainarr",
  "stars": 12,
  "forks": 0,
  "category": "ai-ml",
  "categories": [
    "ai-ml"
  ],
  "tags": [
    "ai",
    "anthropic",
    "deepseek",
    "discovery",
    "gemini",
    "grok",
    "groq",
    "lidarr",
    "lmstudio",
    "music",
    "ollama",
    "openai",
    "openrouter",
    "perplexity",
    "plugins"
  ],
  "tier": 3,
  "status": "active",
  "createdAt": "2025-08-12T22:54:56Z",
  "updatedAt": "2025-12-16T10:23:16Z",
  "lastCommitAt": "2025-12-15T04:25:19Z",
  "source": "github-search",
  "collectedAt": "2025-12-17T03:34:20.176Z",
  "authorUrl": "https://github.com/RicherTunes",
  "license": "MIT",
  "readme": "# Brainarr\n\nLocal-first AI recommendations for Lidarr. Cloud providers are optional.\nRequires Lidarr 2.14.2.4786+ on the plugins/nightly branch.\n[![Version](https://img.shields.io/badge/version-1.3.2-brightgreen)](plugin.json)\n\nLatest release: **v1.3.2**\n\n![Brainarr Logo](docs/assets/brainarr-logo.png)\n\nDiscover albums with deterministic, local-first AI. Pick a provider (local or cloud), set budgets, and get reproducible, high-signal recommendations.\n\n## Reliability & Timeouts\n\nBrainarr avoids UI hangs by executing provider calls and tests on a dedicated thread with strict timeouts. Local defaults (Ollama/LM Studio) work entirely offline; when networked features are enabled (e.g., styles catalog refresh or cloud providers), short timeouts and retries ensure the plugin remains responsive even under provider issues.\n\nTimeout and retry defaults\n\n- Test timeout: 10s (connection/model checks)\n- Retries: 3 attempts with backoff\n- Circuit breaker: opens for 1 minute on sustained failures (half-open requires 3 successes)\n\nProvider call timeouts (defaults)\n\n- Ollama: 60s\n- LM Studio: 60s\n- OpenAI: 30s\n- Anthropic: 30s\n- Gemini: 30s\n- Perplexity: 25s\n- Groq: 20s\n- OpenRouter (gateway): 45s\n\nNotes\n\n- Values are configurable per provider in Advanced Settings. Brainarr enforces an upper guardrail of 600 seconds (10 minutes) for any single request to accommodate slow local models.\n- Local providers (Ollama/LM Studio) automatically use a 360-second (6-minute) timeout when the configured timeout is at or below the default of 30 seconds.\n\n## Install via Lidarr UI (recommended)\n\nYou can install Brainarr directly from Lidarr without downloading a ZIP:\n\n1. Ensure Lidarr is on the plugins/nightly branch and at least version 2.14.2.4786 (Settings > General > Updates > Branch = nightly).\n2. Go to Settings > Plugins.\n3. Click Add Plugin.\n4. Paste the repository URL: <https://github.com/RicherTunes/Brainarr>\n5. Click Install, then Restart when prompted.\n6. Go to Settings > Import Lists and add Brainarr.\n\n## Installing from Releases\n\nThere are two ways to install Brainarr:\n\n1. From the Latest release page (recommended)\n\n- Go to GitHub Releases and download the ZIP asset for the latest version (currently v1.3.2).\n- Extract the contents into Lidarr’s plugins directory:\n  - Docker: `/config/plugins/RicherTunes/Brainarr/`\n  - Linux: `/var/lib/lidarr/plugins/RicherTunes/Brainarr/`\n  - Windows: `%ProgramData%\\\\Lidarr\\\\plugins\\\\RicherTunes\\\\Brainarr\\\\`\n- Restart Lidarr, then add Brainarr under Settings → Import Lists.\n\n1. Using the moving tag \"latest\"\n\n- The repository maintains a tag named `latest` that points to the newest stable tag (presently v1.3.2). Any automation that follows\neleases/latest will pick up the most recent stable build automatically when we publish a new version.\n\nNotes\n\n- Brainarr requires Lidarr 2.14.2.4786+ on the plugins/nightly branch. Our CI extracts assemblies from the plugins Docker image to validate compatibility.\n- The packaged manifest.json is included in the ZIP so Lidarr recognizes the plugin in the Installed list after manual installs.\n\n## Upgrade Notes: 1.3.0\n\n- Deterministic planning and caching: sampling-shape defaults moved to configuration; planner and renderer got stable hashing and ordering. Caches invalidate on trim or fingerprint changes.\n- Safer timeouts and resilience: provider calls enforce per-request budgets; retries tuned and logged.\n- Docs and provider matrix refreshed; see full details in the 1.3.0 entry of CHANGELOG.\n\nSee CHANGELOG.md for the complete 1.3.0 list.\n\n## Screenshots\n\n- Landing\n\n  ![Landing](docs/assets/screenshots/landing.png)\n\n- Settings (provider, model, timeouts, budgets)\n\n  ![Settings](docs/assets/screenshots/settings.png)\n\n- Import Lists (search Brainarr)\n\n  ![Import Lists](docs/assets/screenshots/import-lists.png)\n\n- Recommendations (result list)\n\n  ![Recommendations](docs/assets/screenshots/results.png)\n\n## Run Screenshots Locally\n\nGenerate the same PNG screenshots the CI workflow produces by spinning up a real Lidarr (plugins branch) instance with the Brainarr plugin mounted, then driving the UI with Playwright.\n\nPrerequisites\n\n- Docker (Linux containers)\n- Node.js 18+ (prefer 20) and npm\n- .NET 6 SDK\n\nPOSIX (macOS/Linux)\n\n```bash\nchmod +x scripts/snapshots/run-local.sh\nscripts/snapshots/run-local.sh\n# Options: --port 8765 --lidarr-tag pr-plugins-2.14.2.4786 --skip-build --wait-secs 900\n```\n\nWindows PowerShell\n\n```powershell\n./scripts/snapshots/run-local.ps1\n# Parameters: -Port 8765 -LidarrTag pr-plugins-2.14.2.4786 -SkipBuild -WaitSecs 900\n```\n\nOutputs\n\n- PNGs are written to `docs/assets/screenshots/` (landing.png, settings.png, import-lists.png, results.png).\n- The container is stopped automatically when the script finishes.\n\nTroubleshooting\n\n- If the plugin does not appear in Lidarr, verify the mount path is exactly `/config/plugins/RicherTunes/Brainarr` and that `plugin-dist/` contains `Lidarr.Plugin.Brainarr.dll`, `plugin.json`, and `manifest.json`.\n- If the UI is slow to boot on first run, increase the wait (e.g., `--wait-secs 900`).\n- To debug visually, edit `scripts/snapshots/snap.mjs` and change `headless: true` to `false`.\n\n## Contents\n\n- [What is Brainarr](#what-is-brainarr)\n- [Quickstart](#quickstart)\n- [Configuration](#configuration)\n- [Provider compatibility](#provider-compatibility)\n- [Upgrade Notes: 1.3.0](#upgrade-notes-130)\n- [Troubleshooting](#troubleshooting)\n- [Security](#security)\n- [Contributing](#contributing)\n\n## What is Brainarr\n\nBrainarr is an import list plugin that enriches Lidarr with AI-assisted album discovery while staying inside Lidarr’s import-list workflow.\n\nIt leans on a local-first stance by default—install the plugin, point it at your Lidarr nightly instance, and you can start running recommendations without sending prompts off-box. See the [configuration guide](./docs/configuration.md) for the full option set.\n\nPrompt planning follows a deterministic pipeline. We fingerprint your library, select representative styles, sample artists/albums, and hand off to the renderer; the [planner & cache deep dive](./docs/planner-and-cache.md) walks through each stage.\n\nA fingerprinted LRU cache with a sliding TTL keeps recent plans warm. When you change styles or a fingerprint shifts, the cache invalidates automatically—details and tuning live in the same [planner & cache guide](./docs/planner-and-cache.md).\n\nToken budgeting uses a registry-plus-tokenizer model. When a tokenizer is missing we fall back to an estimator, emit a one-time warning, and log `tokenizer.fallback`; learn how to tighten drift in [tokenization & estimates](./docs/tokenization-and-estimates.md).\n\nTelemetry is built in: metrics such as `prompt.plan_cache_*`, `prompt.headroom_violation`, and tokenizer fallbacks surface in Lidarr’s Prometheus endpoint. The [metrics reference](./docs/METRICS_REFERENCE.md) and [troubleshooting](./docs/troubleshooting.md) explain how to interpret them.\n\nOut of the box Brainarr stays purely local through Ollama/LM Studio, including iterative refinement defaults that backfill sparse runs. If you opt into cloud providers, they share the same configuration surface—see [configuration](./docs/configuration.md) for how to enable each one.\n\nCloud integrations (OpenAI, Anthropic, Gemini, Perplexity, Groq, DeepSeek, OpenRouter) inherit the same guardrails: optional by design, API key redaction, and planner headroom enforcement. Provider availability and notes remain single-sourced via the generated [provider matrix](./docs/PROVIDER_MATRIX.md).\n\nSetup scripts (`setup.ps1` / `setup.sh`) fetch Lidarr nightly assemblies, build the plugin against real binaries, and keep `LIDARR_PATH` consistent. For a full bootstrap and local workflows, see [BUILD.md](./BUILD.md) and [DEVELOPMENT.md](./DEVELOPMENT.md).\n\nDocumentation guardrails—`scripts/sync-provider-matrix.ps1`, `scripts/check-docs-consistency.ps1` / `scripts/check-docs-consistency.sh`, and markdown lint/link checks—keep README, docs, and wiki in sync. Contributors can follow the workflow outlined in [CONTRIBUTING.md](./CONTRIBUTING.md).\n\nRelease cadence is captured in the [changelog](CHANGELOG.md) and per-release notes under `docs/release-notes/`; the latest milestone summary is in [docs/release-notes/v1.3.0.md](./docs/release-notes/v1.3.0.md).\n\nFor day-to-day operations, start with the [upgrade notes](./docs/upgrade-notes-1.3.0.md) and [troubleshooting playbook](./docs/troubleshooting.md). The wiki now stubs back to these canonical docs so every surface references the same truth.\n\n## Quickstart\n\n1. Confirm Lidarr is on the nightly branch at version 2.14.2.4786 or newer by visiting `Settings → General → Updates`.\n2. If needed, switch the branch to nightly and allow Lidarr to download the update.\n3. Restart Lidarr after the nightly update finishes installing.\n4. Download the Brainarr v1.3.2 release archive from GitHub.\n5. Extract the archive to a temporary working directory.\n6. Copy the `RicherTunes/Brainarr` folder from the archive into your Lidarr plugins directory.\n7. On Windows, verify the folder now lives at `C:\\ProgramData\\Lidarr\\plugins\\RicherTunes\\Brainarr`.\n8. On Linux, verify the folder now lives at `/var/lib/lidarr/plugins/RicherTunes/Brainarr`.\n9. On macOS, verify the folder now lives at `~/Library/Application Support/Lidarr/plugins/RicherTunes/Brainarr`.\n10. Confirm the folder contains `plugin.json`, `manifest.json`, and `Brainarr.Plugin.dll`.\n11. Restart Lidarr so it loads the updated plugin binaries.\n12. Open Lidarr and visit `Settings → Plugins` to confirm Brainarr is listed as enabled.\n13. Navigate to `Settings → Import Lists` and click `+` to add a new list.\n14. Select `Brainarr AI Music Discovery` from the available list types.\n15. Provide a descriptive name for the list (for example `Brainarr Recommendations`).\n16. Leave the `Enable` toggle on to keep the list active after creation.\n17. Verify the `AI Provider` defaults to `Ollama`, the local-first choice.\n18. Ensure your Ollama service is running on `http://localhost:11434`.\n19. Pull the `qwen2.5:latest` model in Ollama if it is not already installed (`ollama pull qwen2.5`).\n20. Click `Test` in the Brainarr settings panel and wait for the success message.\n21. If the test fails, review `System → Logs` for provider connection errors and correct the URL or model.\n22. Leave cloud providers disabled to keep the local-first default until you intentionally opt in.\n23. Check that `Max Recommendations` remains at the default value of 20.\n24. Confirm `Discovery Mode` is set to `Adjacent` to favor related library neighbors.\n25. Keep `Sampling Strategy` at `Balanced` for even style coverage.\n26. Leave iterative refinement enabled so Brainarr can top up sparse results automatically.\n27. Review the `Plan Cache Capacity` (default 256) and adjust only if your environment requires a different size.\n28. Review the `Plan Cache TTL (minutes)` (default 5) and adjust only if your library changes extremely quickly.\n29. Click `Save` to persist the configuration.\n30. Back on the Import Lists overview, click `Run Now` to trigger the first Brainarr discovery.\n31. Watch `System → Logs` for `Plan cache configured` and `prompt.plan_cache_*` entries that confirm the planner is active.\n32. Note any `tokenizer.fallback` warnings so you can add accurate tokenizers later.\n33. Open `Activity → Import Lists` to inspect the generated recommendations.\n34. Approve or reject the suggested albums according to your collection policy.\n35. Expose Lidarr’s metrics endpoint and scrape `prompt.plan_cache_*` and `tokenizer.fallback` if you monitor Brainarr centrally.\n36. Bookmark [docs/upgrade-notes-1.3.0](./docs/upgrade-notes-1.3.0.md) and [docs/troubleshooting](./docs/troubleshooting.md) so your team shares the canonical guidance.\n\n## Configuration\n\nThe Brainarr configuration surface covers provider selection, planner and cache tuning, and tokenization controls. See the [configuration guide](./docs/configuration.md) for defaults, rationale, and links to the tokenization and planner deep dives. Keep in mind that local providers stay enabled by default and cloud providers remain opt-in.\n\n## Documentation map\n\nUse these focused guides when you need more than the README overview. Each link points at the canonical source in `docs/` so the README stays concise.\n> Note: The GitHub Wiki mirrors these docs from wiki-content/ and the README. Please submit edits via PRs; CI auto-publishes the wiki.\n\n- [Configuration & provider setup](./docs/configuration.md) — enable local-first defaults, wire up optional cloud providers, and learn the required tokens/script prerequisites.\n- [Planner & cache deep dive](./docs/planner-and-cache.md) — understand plan fingerprints, cache TTL behaviour, and deterministic ordering guarantees.\n- [Tokenization & estimates](./docs/tokenization-and-estimates.md) — improve tokenizer accuracy, interpret `tokenizer.fallback`, and keep headroom drift within ±15%.\n- [Troubleshooting playbook](./docs/troubleshooting.md) — resolve trimmed prompts, cache confusion, or provider JSON quirks with step-by-step guidance.\n- [Upgrade notes 1.3.0](./docs/upgrade-notes-1.3.0.md) — checklist for moving from 1.2.x, including new planner settings and cache metrics.\n- [Release process & verification](./docs/RELEASE_PROCESS.md) — follow the release workflow, provider verification steps, and documentation sync scripts.\n\nDevelopers updating docs should also run `pwsh ./scripts/sync-provider-matrix.ps1` and `bash ./scripts/check-docs-consistency.sh` so the generated tables and badges stay aligned.\n\n## Provider compatibility\n\n<!-- GENERATED: scripts/sync-provider-matrix.ps1 -->\n<!-- PROVIDER_MATRIX_START -->\n| Provider | Type | Status | Notes |\n| --- | --- | --- | --- |\n| LM Studio | Local | ✅ Verified in v1.3.1 | Best local reliability in 1.3.x |\n| Gemini | Cloud | ✅ Verified in v1.3.1 | JSON-friendly responses |\n| Perplexity | Cloud | ✅ Verified in v1.3.1 | Web-aware fallback |\n| Ollama | Local | ✅ Verified in v1.3.1 | Run Brainarr entirely offline |\n| OpenAI | Cloud | ⚠️ Experimental | JSON schema support; verify rate limits |\n| Anthropic | Cloud | ⚠️ Experimental |  |\n| Groq | Cloud | ⚠️ Experimental | Low-latency batches |\n| DeepSeek | Cloud | ⚠️ Experimental | Budget-friendly option |\n| OpenRouter | Cloud | ⚠️ Experimental | Gateway to many models |\n| Claude Code | Subscription | ✅ Verified in v1.3.2 | Uses local Claude Code CLI credentials (~/.claude/.credentials.json) |\n| OpenAI Codex | Subscription | ✅ Verified in v1.3.2 | Uses local Codex CLI credentials (~/.codex/auth.json) |\n<!-- PROVIDER_MATRIX_END -->\n\n### Tested local models\n\n- Ollama: `qwen2.5:latest` (default) — balanced quality and speed for 1.3.x.\n- Ollama: `llama3.2:latest` or `llama3.2:8b` — solid fallback with smaller footprint.\n\nSee the Hallucination Reduction guide for tuning tips and prompt examples: `wiki-content/Hallucination-Reduction.md`.\n\n## Upgrade Notes: 1.3.0\n\nRead the focused upgrade checklist in [docs/upgrade-notes-1.3.0.md](./docs/upgrade-notes-1.3.0.md) for planner changes, cache behaviour updates, and post-upgrade actions.\n\n## Troubleshooting\n\nConsult [docs/troubleshooting.md](./docs/troubleshooting.md) for symptom-driven guidance, cache reset tips, and links to tokenizer and provider diagnostics. Quick pointers:\n\n- **Prompt shows `headroom_guard` or trims frequently** – increase the provider context window, loosen style filters, or switch to a larger local model. After adjusting, run the list once to warm the cache and watch `prompt.plan_cache_*` metrics stabilize.\n- **Token counts look off** – add a model-specific tokenizer in the registry or accept the basic estimator after confirming the `tokenizer.fallback` metric fires only once per model. Track `prompt.actual_tokens` vs `prompt.tokens_pre` to confirm drift stays within the ±25% guardrail.\n\n## Security\n\n- High-level security posture and threat model: see `SECURITY.md`.\n- Operational guidance (keys, transports, examples): see `docs/SECURITY.md`.\n\nProvenance\n\n- Each tagged release publishes a software bill of materials (SBOM) and a SHA-256 checksum.\n- Starting with v1.3.2, release ZIPs are also signed with Sigstore Cosign (keyless). Verify the `.sig` signature against the GitHub OIDC identity.\n\n## Contributing\n\nSee [CONTRIBUTING.md](./CONTRIBUTING.md) for coding standards, documentation guardrails, and the required docs verification workflow before submitting a PR.\n\nRun the same sanity build locally as CI:\n\n- PowerShell: `pwsh ./test-local-ci.ps1 -ExcludeHeavy`\n- POSIX: `bash ./test-local-ci.sh --exclude-heavy`\n",
  "installCommand": "git clone https://github.com/RicherTunes/Brainarr ~/.claude/skills/brainarr",
  "defaultBranch": "main",
  "hasMarketplaceJson": false,
  "skillPath": "README.md"
}