{
  "id": "d31476c90e20f349",
  "slug": "opal-frontend",
  "name": "Opal Frontend",
  "description": "",
  "author": "hmcts",
  "authorAvatar": "https://avatars.githubusercontent.com/u/22817111?v=4",
  "repoUrl": "https://github.com/hmcts/opal-frontend",
  "repoFullName": "hmcts/opal-frontend",
  "stars": 8,
  "forks": 1,
  "category": "other",
  "categories": [
    "other"
  ],
  "tags": [
    "jenkins-sds"
  ],
  "tier": 3,
  "status": "active",
  "createdAt": "2023-10-27T11:51:29Z",
  "updatedAt": "2025-12-23T16:47:34Z",
  "lastCommitAt": "2025-12-24T14:23:53Z",
  "source": "github-search",
  "collectedAt": "2025-12-27T03:37:22.611Z",
  "authorUrl": "https://github.com/hmcts",
  "license": null,
  "readme": "# OPAL Frontend\n\nThis is an [Angular SSR](https://angular.dev/guide/ssr) application. There are two main reasons for this:\n\n- the web server for when the app is deployed in Kubernetes.\n\n- to proxy API requests to internally-facing backend API services, such as the [opal-fines-service](https://github.com/hmcts/opal-fines-service). \n\n## Contents\n\n- [Getting Started](#getting-started)\n- [Local Development Strategy](#local-development-strategy)\n- [Production Server](#5-production-server)\n- [Running Unit Tests](#running-unit-tests)\n- [Running End-to-End Tests](#running-end-to-end-tests)\n- [Accessibility Tests](#running-accessibility-tests)\n- [Switching Between Local and Published Common Libraries](#switching-between-local-and-published-common-libraries)\n\n## Getting Started\n\n### Prerequisites\n\nRunning the application requires the following tools to be installed in your environment:\n\n- [Node.js](https://nodejs.org/) v20.9.0 or later.\n\n- [yarn](https://yarnpkg.com/) v3\n\n- [Docker](https://www.docker.com)\n\n### Install Dependencies\n\nInstall dependencies by executing the following command:\n\n```bash\n\nyarn\n\n```\n\n### Local Development Strategy\n\n#### 1. Clone opal-fines-service api\n\nClone the [opal-fines-service](https://github.com/hmcts/opal-fines-service) repository and follow the instructions in there to get it up and running. This is required by the front end to make local API requests.\n\n#### 2. Clone opal-frontend-common-ui-lib\n\nClone the [opal-frontend-common-ui-lib](https://github.com/hmcts/opal-frontend-common-ui-lib) repository and run:\n\n```bash\nyarn\nyarn build\n```\n\nThis is required if you want to develop the frontend against the local version of the UI library using `yarn dev:local-lib:ssr`.\n\n#### 3. Clone opal-frontend-common-node-lib\n\nClone the [opal-frontend-common-node-lib](https://github.com/hmcts/opal-frontend-common-node-lib) repository and run:\n\n```bash\nyarn\nyarn build\n```\n\nThis is required if you want to develop the frontend against the local version of the Node library using `yarn dev:local-lib:ssr`.\n\n#### 4. Development server\n\nThere are two ways to run the Angular SSR application depending on whether you are developing against local or published versions of the common libraries:\n\n- To use the **published** versions of the libraries:\n\n  ```bash\n  yarn dev:ssr\n  ```\n\n  This starts the SSR dev server using the versions pinned in your `package.json`/`yarn.lock`. No packages are reinstalled.\n\n- To use **local** versions of the libraries:\n\n  First, ensure you've built the libraries locally and set the environment variables:\n\n  ```bash\n  export COMMON_UI_LIB_PATH=\"[INSERT PATH TO COMMON UI LIB DIST FOLDER]\"\n  export COMMON_NODE_LIB_PATH=\"[INSERT PATH TO COMMON NODE LIB DIST FOLDER]\"\n  ```\n\n  **Ensure you've built both libraries and exported the environment variables before running this command.**\n\n  Then run:\n\n  ```bash\n  yarn dev:local-lib:ssr\n  ```\n\n  This will import the local builds and start the SSR dev server with those versions.\n\nThe application's home page will be available at **http://localhost:4200**.\n\n**Note** this is running the [Angular SSR](https://angular.dev/guide/ssr) application and expects the [opal-fines-service](https://github.com/hmcts/opal-fines-service) to also be running locally to function correctly.\n\n#### 5. Production server\n\nThere are two options depending on whether you're working with local or published versions of the common libraries. This command builds the [Angular SSR](https://angular.dev/guide/ssr) application for production and serves it. You will **not** have hot reloading in this mode.\n\n- To build and serve the application using the **published** libraries:\n\n  ```bash\n  yarn build:serve:ssr\n  ```\n\n  This will:\n  - Build the application for production using the versions pinned in your `package.json`/`yarn.lock`\n  - Serve it on **http://localhost:4000**\n\n- To build and serve the application using **local** libraries:\n\n  First, ensure you've built both common libraries and set the environment variables:\n\n  ```bash\n  export COMMON_UI_LIB_PATH=\"[INSERT PATH TO COMMON UI LIB DIST FOLDER]\"\n  export COMMON_NODE_LIB_PATH=\"[INSERT PATH TO COMMON NODE LIB DIST FOLDER]\"\n  ```\n\n  **Ensure you've built both libraries and exported the environment variables before running this command.**\n\n  Then run:\n\n  ```bash\n  yarn build:serve:local-lib:ssr\n  ```\n\n  This will:\n  - Import the local builds of the common libraries\n  - Build the application for production\n  - Serve it on **http://localhost:4000**\n\nThe application's home page will be available at **http://localhost:4000**.\n\n**Note** this is running the [Angular SSR](https://angular.dev/guide/ssr) application and expects the [opal-fines-service](https://github.com/hmcts/opal-fines-service) to also be running locally to function correctly.\n\n#### 6. Redis (Optional)\n\nBy default Redis is disabled for local development. If desired, start up a Redis instance locally:\n\n```bash\n\ndocker run -p 6379:6379 -it redis/redis-stack-server:latest\n\n```\n\nAnd enable Redis integration within the application by setting the environment variable `FEATURES_REDIS_ENABLED` to `true`. The application will connect to Redis on the next startup.\n\n#### 7. Launch Darkly (Optional)\n\nBy default Launch Darkly is disabled by default for local development. To enable set the following environment variables. Replace `XXXXXXXXXXXX` with the project client id.\n\n```bash\n\nexport FEATURES_LAUNCH_DARKLY_ENABLED=true\nexport LAUNCH_DARKLY_CLIENT_ID=XXXXXXXXXXXX\n\n```\n\nThe streaming of flags is disabled by default, if you would like to enable set the following environment variable.\n\n```bash\n\nexport FEATURES_LAUNCH_DARKLY_STREAM=true\n\n```\n\n## Build\n\nRun `yarn build:ssr` to build the project. The build artifacts will be stored in the `dist/opal-frontend` directory. This compiles both the node.js server-side code and angular code.\n\n## Code style\n\nWe use [ESLint](https://github.com/typescript-eslint/typescript-eslint) and [Prettier](https://prettier.io/)\n\nRunning the linting:\n\n```bash\n\nyarn lint\n\n```\n\nYou can fix prettier formatting issues using:\n\n```bash\n\nyarn  prettier:fix\n\n```\n\nThere is a custom lint rule for member ordering to ensure members in the code are ordered in the following format:\n\n```json\n[\n  \"private-static-field\",\n  \"protected-static-field\",\n  \"public-static-field\",\n  \"private-instance-field\",\n  \"protected-instance-field\",\n  \"public-instance-field\",\n  \"constructor\",\n  \"private-static-method\",\n  \"protected-static-method\",\n  \"public-static-method\",\n  \"private-instance-method\",\n  \"protected-instance-method\",\n  \"public-instance-method\"\n]\n```\n\n## Running unit tests\n\nRun `yarn test` to execute the unit tests via [karma](https://karma-runner.github.io/latest/index.html).\n\nTo check code coverage, run `yarn test --code-coverage` to execute the unit tests via [karma](https://karma-runner.github.io/latest/index.html) but with code coverage.\nCode coverage can then be found in the coverage folder of the repository locally.\n\n## Running end-to-end tests\n\nWe are using [cypress](https://www.cypress.io/) for our end to end tests.\n\nRun `yarn test:smoke` to execute the end-to-end smoke tests.\n\n```bash\n\nyarn test:smoke\n\n```\n\nRun `yarn test:functional` to execute the end-to-end functional tests.\n\n```bash\n\nyarn test:functional\n\n```\n\nRun `yarn cypress` to open the cypress console, very useful for debugging tests.\n\n```bash\n\nyarn cypress\n\n```\n\n## Running accessibility tests\n\nWe are using [axe-core](https://github.com/dequelabs/axe-core) and [cypress-axe](https://github.com/component-driven/cypress-axe) to check the accessibility.\nRun the production server and once running you can run the smoke or functional test commands.\n\n> See [opal-frontend-common-ui-lib](https://github.com/hmcts/opal-frontend-common-ui-lib) and [opal-frontend-common-node-lib](https://github.com/hmcts/opal-frontend-common-node-lib) for usage and build instructions.\n\n## Switching Between Local and Published Common Libraries\n\nThis project supports switching between local and published versions of the `opal-frontend-common` and `opal-frontend-common-node` libraries using the following scripts:\n\n### Switching to Local Versions\n\nFirst, ensure you've built the libraries locally and exported the paths to the built `dist` folders:\n\n```bash\n# In your shell config file (.zshrc, .bash_profile, etc.)\nexport COMMON_UI_LIB_PATH=\"[INSERT PATH TO COMMON UI LIB FOLDER]\"\nexport COMMON_NODE_LIB_PATH=\"[INSERT PATH TO COMMON NODE LIB DIST FOLDER]\"\n```\n\nThen, run the following scripts:\n\n```bash\nyarn import:local:common-ui-lib\nyarn import:local:common-node-lib\n```\n\nThese commands will remove the published versions and install the local builds from the paths you specified.\n\n### Switching to Published Versions\n\nTo reinstall the published packages **at the exact versions declared in `package.json`** (not the latest):\n\n```bash\nyarn import:published:common-ui-lib\nyarn import:published:common-node-lib\n```\n\nThis is useful when you're no longer working on the libraries directly or want to verify against the published versions that your project is pinned to.\n\n**Note:** Version upgrades should come via Renovate PRs. These commands do **not** upgrade to the latest; they reinstall the exact versions specified in `package.json`. For extra safety in CI, consider using `yarn install --immutable` to prevent lockfile drift.\n\n## Angular code scaffolding\n\nRun `yarn ng generate component component-name` to generate a new component. You can also use `yarn ng generate directive|pipe|service|class|guard|interface|enum|module`.\n\nNote the requirement for prefixing the `ng` commands with `yarn`\n\n## Angular code LLM prompts\n\nhttps://angular.dev/ai/develop-with-ai\n\nPaste the following prompt into your AI assistant of choice.\n\n```markdown\nYou are an expert in TypeScript, Angular, and scalable web application development. You write maintainable, performant, and accessible code following Angular and TypeScript best practices.\n\n## TypeScript Best Practices\n\n- Use strict type checking\n- Prefer type inference when the type is obvious\n- Avoid the `any` type; use `unknown` when type is uncertain\n\n## Angular Best Practices\n\n- Always use standalone components over NgModules\n- Do NOT set `standalone: true` inside the `@Component`, `@Directive` and `@Pipe` decorators\n- Use signals for state management\n- Implement lazy loading for feature routes\n- Use `NgOptimizedImage` for all static images.\n- Do NOT use the `@HostBinding` and `@HostListener` decorators. Put host bindings inside the `host` object of the `@Component` or `@Directive` decorator instead\n\n## Components\n\n- Keep components small and focused on a single responsibility\n- Use `input()` and `output()` functions instead of decorators\n- Use `computed()` for derived state\n- Set `changeDetection: ChangeDetectionStrategy.OnPush` in `@Component` decorator\n- Prefer inline templates for small components\n- Prefer Reactive forms instead of Template-driven ones\n- Do NOT use `ngClass`, use `class` bindings instead\n- DO NOT use `ngStyle`, use `style` bindings instead\n\n## State Management\n\n- Use signals for local component state\n- Use `computed()` for derived state\n- Keep state transformations pure and predictable\n- Do NOT use `mutate` on signals, use `update` or `set` instead\n\n## Templates\n\n- Keep templates simple and avoid complex logic\n- Use native control flow (`@if`, `@for`, `@switch`) instead of `*ngIf`, `*ngFor`, `*ngSwitch`\n- Use the async pipe to handle observables\n\n## Services\n\n- Design services around a single responsibility\n- Use the `providedIn: 'root'` option for singleton services\n- Use the `inject()` function instead of constructor injection\n```\n\n## ğŸ’¡ Copilot Prompt Examples for Angular MCP\n\n### ğŸ“˜ 1. Ask for Documentation Help\n\n**Prompt:**\n\n> â€œHow do Angular signals work?â€\n\n**What Copilot does:**  \nCalls `search_documentation(\"signals\")` and returns official Angular documentation context.\n\n---\n\n### ğŸ§± 2. Generate Code\n\n**Prompt:**\n\n> â€œGenerate a service for user authenticationâ€\n\n**What Copilot does:**  \nRuns `ng generate service user-auth` through the MCP server â€” adds the file in the correct directory.\n\n---\n\n### ğŸ“š 3. Get Project File Structure\n\n**Prompt:**\n\n> â€œList all Angular modules in this projectâ€\n\n**What Copilot does:**  \nUses `list_projects` and `get_file_tree` to find and display modules across the workspace.\n\n---\n\n### ğŸ§­ 4. Navigate Routing Setup\n\n**Prompt:**\n\n> â€œWhat routes are defined in this app?â€\n\n**What Copilot does:**  \nParses routing modules and shows route paths, guards, and lazy-loaded modules.\n\n---\n\n### ğŸ§¹ 5. Refactor with AI Help\n\n**Prompt:**\n\n> â€œConvert this component to use the standalone APIâ€\n\n**What Copilot does:**  \nUpdates component metadata with `standalone: true`, refactors imports, and removes old NgModule references.\n\n---\n\n### ğŸ› ï¸ 6. Add Angular Libraries\n\n**Prompt:**\n\n> â€œAdd Angular Materialâ€\n\n**What Copilot does:**  \nTriggers `ng add @angular/material` to install the package and configure animations + theming.\n",
  "installCommand": "git clone https://github.com/hmcts/opal-frontend ~/.claude/skills/opal-frontend",
  "defaultBranch": "master",
  "hasMarketplaceJson": false,
  "skillPath": "README.md"
}